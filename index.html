<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø¥Ù†Ù‚Ø§Ø° Ø§Ù„Ù…ÙÙ‚ÙˆØ¯ÙŠÙ†</title>
    
    <!-- Ù…ÙƒØªØ¨Ø§Øª Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            emailjs.init("ypOXF_3620Ebgyvia");
        })();
    </script>
    <style>
        /* Ù†ÙØ³ Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: white;
            color: black;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .hidden {
            display: none !important;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }
        
        .main-title {
            text-align: center;
            font-size: 2.5rem;
            margin: 30px 0;
            font-weight: bold;
        }
        
        .platforms-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 50px;
        }
        
        .platform-box {
            background: white;
            border: 2px solid #2E7D32;
            border-radius: 10px;
            width: 300px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .platform-box:hover {
            transform: translateY(-5px);
        }
        
        .platform-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .sub-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .btn-primary {
            background-color: #2E7D32;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1B5E20;
        }
        
        .btn-success {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #388E3C;
        }
        
        .btn-danger {
            background-color: #f44336;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #d32f2f;
        }
        
        .form-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 30px auto;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .menu-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 25px 0;
        }
        
        .menu-item {
            background-color: #2E7D32;
            color: white;
            padding: 18px;
            border-radius: 8px;
            cursor: pointer;
            flex: 1;
            min-width: 180px;
            text-align: center;
            font-weight: bold;
            transition: background-color 0.3s;
            position: relative;
        }
        
        .menu-item:hover {
            background-color: #1B5E20;
        }
        
        .reports-container {
            margin-top: 25px;
        }
        
        .report-item {
            background-color: #f8f9fa;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 5px solid #2E7D32;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .status-new {
            border-left-color: #2196F3;
        }
        
        .status-in-progress {
            border-left-color: #FF9800;
        }
        
        .status-resolved {
            border-left-color: #4CAF50;
        }
        
        .notification {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }
        
        .notification-success {
            background-color: #4CAF50;
            color: white;
        }
        
        .notification-danger {
            background-color: #f44336;
            color: white;
        }
        
        .back-btn {
            margin: 20px 0;
            background-color: #6c757d;
            color: white;
            padding: 12px 25px;
        }
        
        .back-btn:hover {
            background-color: #5a6268;
        }
        
        .user-info {
            background-color: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            border: 1px solid #2E7D32;
        }
        
        .notification-badge {
            background: #f44336;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            position: absolute;
            top: -5px;
            left: -5px;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2E7D32;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .case-image {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
            margin: 10px 0;
            border: 2px solid #ddd;
        }
        
        .platform-content {
            display: none;
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #2E7D32;
            border-radius: 10px;
            background: white;
        }
        
        .platform-content.active {
            display: block;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .platform-section {
            width: 100%;
            max-width: 1000px;
            margin: 20px 0;
        }

        .contact-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-right: 4px solid #2196F3;
        }

        .photo-preview-container {
            text-align: center;
            margin: 15px 0;
        }
        
        .notification-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-right: 4px solid #2E7D32;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .notification-item.unread {
            background: #e8f5e8;
            border-right-color: #4CAF50;
        }
        
        .notification-item .mark-read {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #2196F3;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .edit-form {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .header-notification {
            position: relative;
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div id="main-page" class="container">
        <h1 class="main-title">ğŸš¨ Ù…Ù†ØµØ© Ø¥Ù†Ù‚Ø§Ø° Ø§Ù„Ù…ÙÙ‚ÙˆØ¯ÙŠÙ† ğŸš¨</h1>
        
        <div class="main-content">
            <div class="platforms-container">
                <!-- Ù…Ù†ØµØ© Ø§Ù„Ø´Ø±Ø·Ø© -->
                <div class="platform-box" onclick="showPlatform('police')">
                    <div class="platform-title">ğŸ‘®â€â™€ï¸ğŸ‘®â€â™‚ï¸ Ø§Ù„Ø´Ø±Ø·Ø©</div>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showRegister('police')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showLogin('police')">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
                    </div>
                </div>
                
                <!-- Ù…Ù†ØµØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
                <div class="platform-box" onclick="showPlatform('user')">
                    <div class="platform-title">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</div>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showRegister('user')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showLogin('user')">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
                    </div>
                </div>
                
                <!-- Ù…Ù†ØµØ© Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† -->
                <div class="platform-box" onclick="showPlatform('volunteer')">
                    <div class="platform-title">ğŸ‘¥ï¸ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†</div>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showRegister('volunteer')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showLogin('volunteer')">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
                    </div>
                </div>
            </div>

            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù†ØµØ§Øª -->
            <div class="platform-section">
                <div id="police-content" class="platform-content">
                    <h2>ğŸ‘®â€â™€ï¸ğŸ‘®â€â™‚ï¸ Ù…Ù†ØµØ© Ø§Ù„Ø´Ø±Ø·Ø©</h2>
                    <p>Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØµØ© Ù…Ø®ØµØµØ© Ù„Ø±Ø¬Ø§Ù„ Ø§Ù„Ø´Ø±Ø·Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯ÙŠÙ† ÙˆÙ…ØªØ§Ø¨Ø¹ØªÙ‡Ø§.</p>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="showRegister('police')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø´Ø±Ø·Ø©</button>
                        <button class="btn btn-primary" onclick="showLogin('police')">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø´Ø±Ø·Ø©</button>
                    </div>
                </div>

                <div id="user-content" class="platform-content">
                    <h2>ğŸ‘¤ Ù…Ù†ØµØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>
                    <p>Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØµØ© Ù…Ø®ØµØµØ© Ù„Ù„Ù…ÙˆØ§Ø·Ù†ÙŠÙ† Ù„Ø¥Ø¶Ø§ÙØ© Ø¨Ù„Ø§ØºØ§Øª Ø¹Ù† Ø§Ù„Ù…ÙÙ‚ÙˆØ¯ÙŠÙ† ÙˆÙ…ØªØ§Ø¨Ø¹Ø© ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø©.</p>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="showRegister('user')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø³ØªØ®Ø¯Ù…</button>
                        <button class="btn btn-primary" onclick="showLogin('user')">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</button>
                    </div>
                </div>

                <div id="volunteer-content" class="platform-content">
                    <h2>ğŸ‘¥ï¸ Ù…Ù†ØµØ© Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†</h2>
                    <p>Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†ØµØ© Ù…Ø®ØµØµØ© Ù„Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙÙ‚ÙˆØ¯ÙŠÙ† ÙˆØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª.</p>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="showRegister('volunteer')">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…ØªØ·ÙˆØ¹</button>
                        <button class="btn btn-primary" onclick="showLogin('volunteer')">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØ·ÙˆØ¹</button>
                    </div>
                </div>
            </div>

            <!-- Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„ -->
            <div class="platform-section">
                <!-- Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ø´Ø±Ø·Ø© -->
                <div id="police-register" class="form-container hidden">
                    <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø´Ø±Ø·Ø©</h2>
                    <div class="form-group">
                        <label for="police-name">Ø§Ù„Ø§Ø³Ù…</label>
                        <input type="text" id="police-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù…">
                    </div>
                    <div class="form-group">
                        <label for="police-number">Ø§Ù„Ø±Ù‚Ù…</label>
                        <input type="text" id="police-number" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù…">
                    </div>
                    <div class="form-group">
                        <label for="police-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="police-email" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label for="police-password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="police-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button class="btn btn-primary" onclick="registerPolice()" id="police-register-btn">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
                    <button class="btn back-btn" onclick="showMainPage()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                </div>

                <div id="police-login" class="form-container hidden">
                    <h2>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø´Ø±Ø·Ø©</h2>
                    <div class="form-group">
                        <label for="police-login-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="police-login-email" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label for="police-login-password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="police-login-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button class="btn btn-primary" onclick="loginPolice()" id="police-login-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                    <button class="btn back-btn" onclick="showMainPage()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                </div>

                <!-- Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† -->
                <div id="user-register" class="form-container hidden">
                    <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…Ø³ØªØ®Ø¯Ù…</h2>
                    <div class="form-group">
                        <label for="user-name">Ø§Ù„Ø§Ø³Ù…</label>
                        <input type="text" id="user-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù…">
                    </div>
                    <div class="form-group">
                        <label for="user-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="user-email" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label for="user-phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" id="user-phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (+249xxxxxxxxx )" required>
                    </div>
                    <div class="form-group">
                        <label for="user-password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="user-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button class="btn btn-primary" onclick="registerUser()" id="user-register-btn">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
                    <button class="btn back-btn" onclick="showMainPage()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                </div>

                <div id="user-login" class="form-container hidden">
                    <h2>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h2>
                    <div class="form-group">
                        <label for="user-login-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="user-login-email" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label for="user-login-password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="user-login-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button class="btn btn-primary" onclick="loginUser()" id="user-login-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                    <button class="btn back-btn" onclick="showMainPage()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                </div>

                <!-- Ù†Ù…Ø§Ø°Ø¬ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† -->
                <div id="volunteer-register" class="form-container hidden">
                    <h2>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ù…ØªØ·ÙˆØ¹</h2>
                    <div class="form-group">
                        <label for="volunteer-name">Ø§Ù„Ø§Ø³Ù…</label>
                        <input type="text" id="volunteer-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù…">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="volunteer-email" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                        <input type="tel" id="volunteer-phone" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="volunteer-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button class="btn btn-primary" onclick="registerVolunteer()" id="volunteer-register-btn">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
                    <button class="btn back-btn" onclick="showMainPage()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                </div>

                <div id="volunteer-login" class="form-container hidden">
                    <h2>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØ·ÙˆØ¹</h2>
                    <div class="form-group">
                        <label for="volunteer-login-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="volunteer-login-email" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-login-password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                        <input type="password" id="volunteer-login-password" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
                    </div>
                    <button class="btn btn-primary" onclick="loginVolunteer()" id="volunteer-login-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                    <button class="btn back-btn" onclick="showMainPage()">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
    <div id="user-dashboard" class="container hidden">
        <h1 class="main-title">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</h1>
        <div class="user-info" id="user-welcome"></div>
        
        <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ -->
        <div class="contact-info">
            <h3>ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ</h3>
            <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> <span id="user-phone-display"></span></p>
            <p><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> <span id="user-email-display"></span></p>
        </div>
        
        <!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
        <div id="user-notifications">
            <h3 class="header-notification">
                ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                <span id="user-notifications-badge" class="notification-badge hidden">0</span>
            </h3>
            <div id="user-notifications-list"></div>
        </div>
        
        <div class="menu-container">
            <div class="menu-item" onclick="showUserSection('add-report')">
                Ø¥Ø¶Ø§ÙØ© Ø¨Ù„Ø§Øº
            </div>
            <div class="menu-item" onclick="showUserSection('police-reports')">
                ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø©
                <span id="police-reports-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showUserSection('my-reports')">
                Ø¨Ù„Ø§ØºØ§ØªÙŠ
                <span id="my-reports-badge" class="notification-badge hidden">0</span>
            </div>
        </div>

        <!-- Ø¥Ø¶Ø§ÙØ© Ø¨Ù„Ø§Øº -->
        <div id="add-report" class="form-container">
            <h2>Ø¥Ø¶Ø§ÙØ© Ø¨Ù„Ø§Øº</h2>
            <form id="add-report-form">
                <div class="form-group">
                    <label for="missing-name">Ø§Ø³Ù… Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                    <input type="text" id="missing-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…ÙÙ‚ÙˆØ¯" required>
                </div>
                <div class="form-group">
                    <label for="missing-age">Ø¹Ù…Ø± Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                    <input type="text" id="missing-age" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù…Ø± Ø§Ù„Ù…ÙÙ‚ÙˆØ¯" required>
                </div>
                <div class="form-group">
                    <label for="missing-type">Ù†ÙˆØ¹ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                    <select id="missing-type" required>
                        <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
                        <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="last-call">Ø¢Ø®Ø± Ù…ÙƒØ§Ù„Ù…Ø© Ù…Ø¹ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                    <input type="text" id="last-call" placeholder="Ø¢Ø®Ø± Ù…ÙƒØ§Ù„Ù…Ø©" required>
                </div>
                <div class="form-group">
                    <label for="last-location">Ø¢Ø®Ø± Ù…ÙƒØ§Ù† Ø´ÙˆÙ‡Ø¯ ÙÙŠÙ‡ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                    <input type="text" id="last-location" placeholder="Ø¢Ø®Ø± Ù…ÙƒØ§Ù†" required>
                </div>
                <div class="form-group">
                    <label for="missing-height">Ø·ÙˆÙ„ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                    <input type="text" id="missing-height" placeholder="Ø·ÙˆÙ„ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯" required>
                </div>
                <div class="form-group">
                    <label for="missing-description">ÙˆØµÙ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                    <textarea id="missing-description" rows="3" placeholder="ÙˆØµÙ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯" required></textarea>
                </div>
                
                <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¬Ù‡Ø© Ø§Ù„Ø§ØªØµØ§Ù„ -->
                <div class="contact-info">
                    <h4>ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¬Ù‡Ø© Ø§Ù„Ø§ØªØµØ§Ù„</h4>
                    <div class="form-group">
                        <label for="reporter-phone">Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ Ù„Ù„ØªÙˆØ§ØµÙ„</label>
                        <input type="tel" id="reporter-phone" placeholder="Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§ØªÙƒ">
                    </div>
                    <div class="form-group">
                        <label for="additional-contact">Ø±Ù‚Ù… Ø§ØªØµØ§Ù„ Ø¥Ø¶Ø§ÙÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <input type="tel" id="additional-contact" placeholder="Ø±Ù‚Ù… Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„ØªÙˆØ§ØµÙ„">
                    </div>
                    <div class="form-group">
                        <label for="user-phone-2">Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <input type="tel" id="user-phone-2" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¥Ø¶Ø§ÙÙŠ">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="missing-photo">ØµÙˆØ±Ø© Ø§Ù„Ù…ÙÙ‚ÙˆØ¯ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                    <input type="file" id="missing-photo" accept="image/*">
                    <div class="photo-preview-container">
                        <img id="photo-preview" class="case-image hidden">
                    </div>
                </div>
                <button type="button" class="btn btn-primary" onclick="addUserReport()" id="add-report-btn">Ø¥Ø¨Ù„Ø§Øº</button>
            </form>
            
            <div id="report-success" class="notification notification-success hidden">
                âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ø¨Ù„Ø§Øº Ø¨Ù†Ø¬Ø§Ø­
            </div>
        </div>

        <!-- ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø© -->
        <div id="police-reports" class="reports-container hidden">
            <h2>ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø©</h2>
            <div id="police-reports-list"></div>
        </div>

        <!-- Ø¨Ù„Ø§ØºØ§ØªÙŠ -->
        <div id="my-reports" class="reports-container hidden">
            <h2>Ø¨Ù„Ø§ØºØ§ØªÙŠ</h2>
            <div id="my-reports-list"></div>
        </div>

        <button class="btn back-btn" onclick="showMainPage()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>

    <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø´Ø±Ø·Ø© -->
    <div id="police-dashboard" class="container hidden">
        <h1 class="main-title">ğŸ‘®â€â™€ï¸ğŸ‘®â€â™‚ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø´Ø±Ø·Ø©</h1>
        <div class="user-info" id="police-welcome"></div>
        
        <!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø±Ø·Ø© -->
        <div id="police-notifications">
            <h3 class="header-notification">
                ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                <span id="police-notifications-badge" class="notification-badge hidden">0</span>
            </h3>
            <div id="police-notifications-list"></div>
        </div>
        
        <div class="menu-container">
            <div class="menu-item" onclick="showPoliceSection('new-reports')">
                Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                <span id="new-reports-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showPoliceSection('in-progress-reports')">
                Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„
                <span id="in-progress-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showPoliceSection('resolved-reports')">
                Ø¨Ù„Ø§ØºØ§Øª ØªÙ… Ø­Ù„Ù‡Ø§
                <span id="resolved-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showPoliceSection('volunteer-reports')">
                ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†
                <span id="volunteer-reports-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showPoliceSection('upload-reports')">
                Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
                <span id="upload-reports-badge" class="notification-badge hidden">0</span>
            </div>
        </div>

        <!-- Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
        <div id="new-reports" class="reports-container">
            <h2>Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h2>
            <div id="new-reports-list"></div>
        </div>

        <!-- Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„ -->
        <div id="in-progress-reports" class="reports-container hidden">
            <h2>Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„</h2>
            <div id="in-progress-reports-list"></div>
        </div>

        <!-- Ø¨Ù„Ø§ØºØ§Øª ØªÙ… Ø­Ù„Ù‡Ø§ -->
        <div id="resolved-reports" class="reports-container hidden">
            <h2>Ø¨Ù„Ø§ØºØ§Øª ØªÙ… Ø­Ù„Ù‡Ø§</h2>
            <div id="resolved-reports-list"></div>
        </div>

        <!-- ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† -->
        <div id="volunteer-reports" class="reports-container hidden">
            <h2>ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†</h2>
            <div id="volunteer-reports-list"></div>
        </div>

        <!-- Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
        <div id="upload-reports" class="form-container hidden">
            <h2>Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h2>
            <div class="form-group">
                <label for="report-case">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø§Øº</label>
                <select id="report-case">
                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø§Øº</option>
                </select>
            </div>
            <div class="form-group">
                <label for="report-content">Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</label>
                <textarea id="report-content" rows="5" placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø±ÙŠØ±"></textarea>
            </div>
            <button class="btn btn-success" onclick="sendPoliceReport()" id="send-report-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
        </div>

        <button class="btn back-btn" onclick="showMainPage()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>

    <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† -->
    <div id="volunteer-dashboard" class="container hidden">
        <h1 class="main-title">ğŸ‘¥ï¸ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†</h1>
        <div class="user-info" id="volunteer-welcome"></div>
        
        <!-- Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† -->
        <div id="volunteer-notifications">
            <h3 class="header-notification">
                ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
                <span id="volunteer-notifications-badge" class="notification-badge hidden">0</span>
            </h3>
            <div id="volunteer-notifications-list"></div>
        </div>
        
        <div class="menu-container">
            <div class="menu-item" onclick="showVolunteerSection('all-reports')">
                ÙƒÙ„ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø© Ù„Ù„Ø´Ø±Ø·Ø©
                <span id="all-reports-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showVolunteerSection('select-case')">
                Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„Ø©
                <span id="select-case-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showVolunteerSection('my-reports')">
                ØªÙ‚Ø§Ø±ÙŠØ±ÙŠ
                <span id="my-volunteer-reports-badge" class="notification-badge hidden">0</span>
            </div>
        </div>

        <!-- ÙƒÙ„ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª -->
        <div id="all-reports" class="reports-container">
            <h2>ÙƒÙ„ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø© Ù„Ù„Ø´Ø±Ø·Ø©</h2>
            <div id="all-reports-list"></div>
        </div>

        <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div id="select-case" class="form-container hidden">
            <h2>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„Ø©</h2>
            <div class="form-group">
                <label for="volunteer-case">Ø§Ø®ØªØ± Ø­Ø§Ù„Ø© ÙÙ‚Ø¯Ø§Ù†</label>
                <select id="volunteer-case">
                    <option value="">Ø§Ø®ØªØ± Ø­Ø§Ù„Ø© ÙÙ‚Ø¯Ø§Ù†</option>
                </select>
            </div>
            
            <div id="case-details" class="hidden">
                <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø©</h3>
                <div id="case-info"></div>
                
                <div class="form-group">
                    <label for="volunteer-info">Ù‡Ù„ Ø´Ø§Ù‡Ø¯Øª Ø§Ù„Ø­Ø§Ù„Ø© Ø£Ùˆ Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø© ØªØ³Ø§Ø¹Ø¯ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«ØŸ</label>
                    <textarea id="volunteer-info" rows="5" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙŠ Ù„Ø¯ÙŠÙƒ"></textarea>
                </div>
                
                <div class="contact-info">
                    <h4>ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ</h4>
                    <div class="form-group">
                        <label for="volunteer-email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="volunteer-email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-phone-1">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 1</label>
                        <input type="tel" id="volunteer-phone-1" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø£ÙˆÙ„">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-phone-2">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 2 (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                        <input type="tel" id="volunteer-phone-2" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¥Ø¶Ø§ÙÙŠ">
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="submitVolunteerReport()" id="volunteer-report-btn">Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ù„Ù„Ø´Ø±Ø·Ø©</button>
            </div>
        </div>

        <!-- ØªÙ‚Ø§Ø±ÙŠØ±ÙŠ -->
        <div id="my-reports" class="reports-container hidden">
            <h2>ØªÙ‚Ø§Ø±ÙŠØ±ÙŠ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©</h2>
            <div id="my-volunteer-reports-list"></div>
        </div>

        <button class="btn back-btn" onclick="showMainPage()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </div>
<script src="firebase-db.js"></script>
    <!-- ØªÙƒÙˆÙŠÙ† Firebase -->

    
</script>
    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        const appData = {
            police: [],
            users: [],
            volunteers: [],
            reports: [],
            policeReports: [],
            volunteerReports: [],
            userNotifications: [],
            policeNotifications: [],
            volunteerNotifications: [],
            currentUser: null,
            currentReportId: null,
            editingReportId: null
        };
        // ==================== Ø¯ÙˆØ§Ù„ EmailJS ====================
        function sendLoginNotification(toEmail, userName, report) {
            console.log('ğŸ“§ Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø¥Ù„Ù‰:', toEmail);
            
            emailjs.send("service_sbkepx6", "template_m7905go", {
                to_email: toEmail,
                to_name: userName,
                missing_name: report.missingName,
                missing_age: report.missingAge,
                missing_type: report.missingType,
                last_call: report.lastCall,
                last_location: report.lastLocation,
                missing_height: report.missingHeight,
                missing_description: report.missingDescription,
                reporter_phone: report.reporterPhone,
                reporter_name: report.reporterName,
                additional_contact: report.additionalContact || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'
            })
            .then(function(response) {
                console.log('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­', response.status, response.text);
                showCustomNotification('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ ' + toEmail, 'success');
            }, function(error) {
                console.log('âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„', error);
                showCustomNotification('âŒ ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ØŒ ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø¯ÙŠÙ„', 'warning');
                sendAlternativeNotification(toEmail, report);
            });
        }

        function sendAlternativeNotification(email, report) {
            console.log('ğŸ”„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø¯ÙŠÙ„ Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');
            const backupNotification = {
                id: Date.now(),
                to: email,
                report: report,
                timestamp: new Date().toLocaleString('ar-EG'),
                type: 'backup'
            };
            
            let backups = JSON.parse(localStorage.getItem('emailBackups')) || [];
            backups.push(backupNotification);
            localStorage.setItem('emailBackups', JSON.stringify(backups));
            
            showCustomNotification('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¨Ø¯ÙŠÙ„', 'info');
        }

        function showCustomNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 10000;
                max-width: 400px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease-out;
            `;
            
            if (type === 'success') {
                notification.style.backgroundColor = '#4CAF50';
            } else if (type === 'warning') {
                notification.style.backgroundColor = '#FF9800';
            } else if (type === 'error') {
                notification.style.backgroundColor = '#f44336';
            } else {
                notification.style.backgroundColor = '#2196F3';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ====================
        function initializeSampleData() {
            // Ø´Ø±Ø·Ø©
            appData.police.push({
                id: 1,
                name: "Ø´Ø±Ø·Ø© Ø§Ù„Ø±ÙŠØ§Ø¶",
                number: "0501234567",
                email: "police@example.com",
                password: "police123"
            });

            // Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
            appData.users.push({
                id: 1,
                name: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
                email: "user@example.com",
                phone: "0551112222",
                password: "user123"
            });

            // Ù…ØªØ·ÙˆØ¹ÙŠÙ†
            appData.volunteers.push({
                id: 1,
                name: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",
                email: "volunteer@example.com",
                phone: "0563334444",
                password: "volunteer123"
            });

            // Ø¨Ù„Ø§ØºØ§Øª Ù…Ø¹ ØµÙˆØ± ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            appData.reports.push({
                id: 1,
                userId: "user@example.com",
                reporterName: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
                reporterPhone: "0551112222",
                additionalContact: "",
                userPhone2: "",
                missingName: "Ø³Ø§Ø±Ø© Ø£Ø­Ù…Ø¯",
                missingAge: "15 Ø³Ù†Ø©",
                missingType: "Ø£Ù†Ø«Ù‰",
                lastCall: "ÙŠÙˆÙ… Ø§Ù„Ø®Ù…ÙŠØ³ 3 Ù…Ø³Ø§Ø¡Ù‹",
                lastLocation: "Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠ",
                missingHeight: "160 Ø³Ù…",
                missingDescription: "ØªØ±ØªØ¯ÙŠ ÙØ³ØªØ§Ù† Ø£Ø²Ø±Ù‚ ÙˆØªØ­Ù…Ù„ Ø­Ù‚ÙŠØ¨Ø© Ø³ÙˆØ¯Ø§Ø¡",
                status: "Ø¬Ø¯ÙŠØ¯",
                date: new Date().toLocaleDateString('ar-EG'),
                photo: "https://via.placeholder.com/200x200/4CAF50/FFFFFF?text=ØµÙˆØ±Ø©+Ø§Ù„Ù…ÙÙ‚ÙˆØ¯"
            });

            appData.reports.push({
                id: 2,
                userId: "user@example.com",
                reporterName: "Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯",
                reporterPhone: "0551112222",
                additionalContact: "0567890123",
                userPhone2: "",
                missingName: "Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡",
                missingAge: "25 Ø³Ù†Ø©",
                missingType: "Ø°ÙƒØ±",
                lastCall: "Ø£Ù…Ø³ Ø§Ù„Ø³Ø§Ø¹Ø© 5 Ù…Ø³Ø§Ø¡Ù‹",
                lastLocation: "Ø­Ø¯ÙŠÙ‚Ø© Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª",
                missingHeight: "175 Ø³Ù…",
                missingDescription: "ÙŠØ±ØªØ¯ÙŠ Ù‚Ù…ÙŠØµ Ø£Ø¨ÙŠØ¶ ÙˆØ³Ø±ÙˆØ§Ù„ Ø¬ÙŠÙ†Ø² Ø£Ø²Ø±Ù‚",
                status: "Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„",
                date: new Date().toLocaleDateString('ar-EG'),
                photo: "https://via.placeholder.com/200x200/2196F3/FFFFFF?text=ØµÙˆØ±Ø©+Ø§Ù„Ù…ÙÙ‚ÙˆØ¯"
            });

            // ØªÙ‚Ø§Ø±ÙŠØ± Ø´Ø±Ø·Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            appData.policeReports.push({
                id: 1,
                reportId: 1,
                content: "ØªÙ… Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø© ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©",
                date: new Date().toLocaleString('ar-EG'),
                read: false
            });

            // ØªÙ‚Ø§Ø±ÙŠØ± Ù…ØªØ·ÙˆØ¹ÙŠÙ† ØªØ¬Ø±ÙŠØ¨ÙŠØ©
            appData.volunteerReports.push({
                id: 1,
                reportId: 1,
                volunteerId: 1,
                volunteerName: "Ù…Ø­Ù…Ø¯ Ø¹Ù„ÙŠ",
                volunteerEmail: "volunteer@example.com",
                volunteerPhone1: "0563334444",
                volunteerPhone2: "0575556666",
                content: "Ø±Ø£ÙŠØª Ø´Ø®ØµØ§Ù‹ ÙŠØ´Ø¨Ù‡ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø© ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ",
                date: new Date().toLocaleString('ar-EG'),
                read: false
            });
        }
function registerUser() {
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            const phone = document.getElementById('user-phone').value;
            const password = document.getElementById('user-password').value;
            
            if (name && email && phone && password) {
                const newUser = {
                    id: appData.users.length + 1,
                    name: name,
                    email: email,
                    phone: phone,
                    password: password
                };
                
                appData.users.push(newUser);
                alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
                showLogin('user');
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
            }
}
        function loginUser() {
            const email = document.getElementById('user-login-email').value;
            const password = document.getElementById('user-login-password').value;
            
            const user = appData.users.find(u => u.email === email && u.password === password);
            
            if (user) {
                appData.currentUser = user;
                showUserDashboard();
            } else {
                alert("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
            }
        }

        function showUserDashboard() {
            document.getElementById('main-page').classList.add('hidden');
            document.getElementById('user-dashboard').classList.remove('hidden');
            document.getElementById('user-welcome').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${appData.currentUser.name}`;
            
            document.getElementById('user-phone-display').textContent = appData.currentUser.phone;
            document.getElementById('user-email-display').textContent = appData.currentUser.email;
            document.getElementById('reporter-phone').value = appData.currentUser.phone;
            
            loadUserNotifications();
            loadUserReports();
            loadPoliceReportsForUser(); // Ø¥Ø¶Ø§ÙØ© ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            updateUserBadges();
        }

        // ==================== Ø¥ØµÙ„Ø§Ø­: Ø¹Ø±Ø¶ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
        function loadPoliceReportsForUser() {
            const policeReportsList = document.getElementById('police-reports-list');
            if (!policeReportsList) return;
            
            policeReportsList.innerHTML = '';
            
            // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø© Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø© Ø¨Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const userReportsIds = appData.reports
                .filter(report => report.userId === appData.currentUser.email)
                .map(report => report.id);
            
            const userPoliceReports = appData.policeReports.filter(pReport => 
                userReportsIds.includes(pReport.reportId)
            );
            
            if (userPoliceReports.length === 0) {
                policeReportsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ù† Ø§Ù„Ø´Ø±Ø·Ø© Ø¨Ø¹Ø¯</p>';
                return;
            }
            
            userPoliceReports.forEach(pReport => {
                const report = appData.reports.find(r => r.id === pReport.reportId);
                if (report) {
                    const reportItem = document.createElement('div');
                    reportItem.className = 'report-item';
                    reportItem.innerHTML = `
                        <h3>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø© Ø¹Ù†: ${report.missingName}</h3>
                        <p><strong>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø±ÙŠØ±:</strong> ${pReport.content}</p>
                        <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±:</strong> ${pReport.date}</p>
                        <p><strong>Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ù„Ø§Øº:</strong> ${report.status}</p>
                    `;
                    policeReportsList.appendChild(reportItem);
                }
            });
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ù„Ø§Øº Ù…Ø¹ Ø§Ù„ØµÙˆØ± ====================
         function addUserReport() {
            const missingName = document.getElementById('missing-name').value;
            const missingAge = document.getElementById('missing-age').value;
            const missingType = document.getElementById('missing-type').value;
            const lastCall = document.getElementById('last-call').value;
            const lastLocation = document.getElementById('last-location').value;
            const missingHeight = document.getElementById('missing-height').value;
            const missingDescription = document.getElementById('missing-description').value;
            const reporterPhone = document.getElementById('reporter-phone').value;
            const additionalContact = document.getElementById('additional-contact').value;
            const userPhone2 = document.getElementById('user-phone-2').value;
            const photoInput = document.getElementById('missing-photo');
            
            if (missingName && missingAge && lastLocation && reporterPhone) {
                let photoData = null;
                
                if (photoInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        photoData = e.target.result;
                        completeReportSubmission(photoData);
                    };
                    reader.readAsDataURL(photoInput.files[0]);
                } else {
                    completeReportSubmission(null);
                }
                
                function completeReportSubmission(photo) {
                    const newReport = {
                        id: appData.reports.length + 1,
                        userId: appData.currentUser.email,
                        reporterName: appData.currentUser.name,
                        reporterPhone: reporterPhone,
                        additionalContact: additionalContact,
                        userPhone2: userPhone2,
                        missingName: missingName,
                        missingAge: missingAge,
                        missingType: missingType,
                        lastCall: lastCall,
                        lastLocation: lastLocation,
                        missingHeight: missingHeight,
                        missingDescription: missingDescription,
                        status: "Ø¬Ø¯ÙŠØ¯",
                        date: new Date().toLocaleDateString('ar-EG'),
                        photo: photo
                    };
                    
                    appData.reports.push(newReport);
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø´Ø±Ø·Ø©
                    sendPoliceNotification(`Ø¨Ù„Ø§Øº Ø¬Ø¯ÙŠØ¯: ${missingName} - ${lastLocation}`);
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    sendUserNotification(`ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø¨Ù„Ø§ØºÙƒ Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ù† ${missingName}`);
                    
                    document.getElementById('report-success').classList.remove('hidden');
                    document.getElementById('add-report-form').reset();
                    document.getElementById('photo-preview').classList.add('hidden');
                    document.getElementById('reporter-phone').value = appData.currentUser.phone;
                    
                    setTimeout(() => {
                        document.getElementById('report-success').classList.add('hidden');
                    }, 5000);
                    
                    loadUserReports();
                    updateUserBadges();
                    
                    alert("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨Ù„Ø§Øº Ø¨Ù†Ø¬Ø§Ø­ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø´Ø±Ø·Ø©");
                }
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ø®Ø§ØµØ© Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ");
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ø´Ø±Ø·Ø© Ù…Ø¹ Ø¥ØµÙ„Ø§Ø­ Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± ====================
        function registerPolice() {
            const name = document.getElementById('police-name').value;
            const number = document.getElementById('police-number').value;
            const email = document.getElementById('police-email').value;
            const password = document.getElementById('police-password').value;
            
            if (name && number && email && password) {
                const newPolice = {
                    id: appData.police.length + 1,
                    name: name,
                    number: number,
                    email: email,
                    password: password
                };
                
                appData.police.push(newPolice);
                alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
                showLogin('police');
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
            }
        }

        function loginPolice() {
            const email = document.getElementById('police-login-email').value;
            const password = document.getElementById('police-login-password').value;
            
            const police = appData.police.find(p => p.email === email && p.password === password);
            
            if (police) {
                appData.currentUser = police;
                showPoliceDashboard();
            } else {
                alert("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
            }
        }

        function showPoliceDashboard() {
            document.getElementById('main-page').classList.add('hidden');
            document.getElementById('police-dashboard').classList.remove('hidden');
            document.getElementById('police-welcome').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${appData.currentUser.name}`;
            loadPoliceData();
            loadPoliceNotifications();
            updatePoliceBadges();
        }

        function loadPoliceData() {
            loadReportsByStatus('new-reports-list', 'Ø¬Ø¯ÙŠØ¯');
            loadReportsByStatus('in-progress-reports-list', 'Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„');
            loadReportsByStatus('resolved-reports-list', 'ØªÙ… Ø§Ù„Ø­Ù„');
            loadVolunteerReports();
            
            // ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª ÙÙŠ Ù†Ù…ÙˆØ°Ø¬ Ø±ÙØ¹ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
            const reportCaseSelect = document.getElementById('report-case');
            if (reportCaseSelect) {
                reportCaseSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¨Ù„Ø§Øº</option>';
                appData.reports.forEach(report => {
                    const option = document.createElement('option');
                    option.value = report.id;
                    option.textContent = `${report.missingName} - ${report.date} - ${report.status}`;
                    reportCaseSelect.appendChild(option);
                });
            }
        }

        function loadReportsByStatus(containerId, status) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            const filteredReports = appData.reports.filter(report => report.status === status);
            
            if (filteredReports.length === 0) {
                container.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ù„Ø§ØºØ§Øª</p>';
                return;
            }
            
            filteredReports.forEach(report => {
                const reportItem = createPoliceReportItem(report);
                container.appendChild(reportItem);
            });
        }

        function createPoliceReportItem(report) {
            const reportItem = document.createElement('div');
            reportItem.className = `report-item status-${getStatusClass(report.status)}`;
            
            let actions = '';
            if (report.status === 'Ø¬Ø¯ÙŠØ¯') {
                actions = `<button class="btn btn-primary" onclick="updateReportStatus(${report.id}, 'Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„')">Ø¨Ø¯Ø¡ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</button>`;
            } else if (report.status === 'Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„') {
                actions = `<button class="btn btn-success" onclick="updateReportStatus(${report.id}, 'ØªÙ… Ø§Ù„Ø­Ù„')">ØªÙ… Ø§Ù„Ø­Ù„</button>`;
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø²Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø¨Ù„Øº
            actions += `<button class="btn btn-success" onclick="contactReporter('${report.reporterPhone}', '${report.reporterName}')">ğŸ“ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø¨Ù„Øº</button>`;
            
            reportItem.innerHTML = `
                <h3>${report.missingName}</h3>
                <p><strong>Ø§Ù„Ø¹Ù…Ø±:</strong> ${report.missingAge}</p>
                <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${report.missingType}</p>
                <p><strong>Ø¢Ø®Ø± Ù…ÙƒØ§Ù„Ù…Ø©:</strong> ${report.lastCall}</p>
                <p><strong>Ø¢Ø®Ø± Ù…ÙƒØ§Ù†:</strong> ${report.lastLocation}</p>
                <p><strong>Ø§Ù„Ø·ÙˆÙ„:</strong> ${report.missingHeight}</p>
                <p><strong>Ø§Ù„ÙˆØµÙ:</strong> ${report.missingDescription}</p>
                <div class="contact-info">
                    <h4>ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¬Ù‡Ø© Ø§Ù„Ø§ØªØµØ§Ù„:</h4>
                    <p><strong>Ø§Ø³Ù… Ø§Ù„Ù…Ø¨Ù„Øº:</strong> ${report.reporterName}</p>
                    <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${report.reporterPhone}</p>
                    ${report.additionalContact ? `<p><strong>Ø±Ù‚Ù… Ø¥Ø¶Ø§ÙÙŠ:</strong> ${report.additionalContact}</p>` : ''}
                    ${report.userPhone2 ? `<p><strong>Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø¥Ø¶Ø§ÙÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…:</strong> ${report.userPhone2}</p>` : ''}
                </div>
                ${report.photo ? `
                    <div class="photo-preview-container">
                        <h4>ğŸ–¼ï¸ ØµÙˆØ±Ø© Ø§Ù„Ù…ÙÙ‚ÙˆØ¯:</h4>
                        <img src="${report.photo}" class="case-image" alt="ØµÙˆØ±Ø© ${report.missingName}">
                    </div>
                ` : ''}
                <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${report.status}</p>
                <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${report.date}</p>
                <div class="action-buttons">${actions}</div>
            `;
            
            return reportItem;
        }

        function getStatusClass(status) {
            switch(status) {
                case 'Ø¬Ø¯ÙŠØ¯': return 'new';
                case 'Ù‚ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„': return 'in-progress';
                case 'ØªÙ… Ø§Ù„Ø­Ù„': return 'resolved';
                default: return 'new';
            }
        }

        function updateReportStatus(reportId, newStatus) {
            const report = appData.reports.find(r => r.id === reportId);
            if (report) {
                const oldStatus = report.status;
                report.status = newStatus;
                
                // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ù„Ø§Øº
                if (oldStatus !== newStatus) {
                    const user = appData.users.find(u => u.email === report.userId);
                    if (user) {
                        sendUserNotification(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø¨Ù„Ø§ØºÙƒ Ø¹Ù† ${report.missingName} Ù…Ù† ${oldStatus} Ø¥Ù„Ù‰ ${newStatus}`, user.email);
                    }
                }
                
                loadPoliceData();
                updatePoliceBadges();
                alert(`ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ù„Ø§Øº Ø¥Ù„Ù‰: ${newStatus}`);
            }
        }

        function contactReporter(phone, name) {
            showCustomNotification(`ğŸ“ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ ${name} Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù…: ${phone}`, 'info');
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† Ù…Ø¹ Ø¥ØµÙ„Ø§Ø­ Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª ====================
        function registerVolunteer() {
            const name = document.getElementById('volunteer-name').value;
            const email = document.getElementById('volunteer-email').value;
            const phone = document.getElementById('volunteer-phone').value;
            const password = document.getElementById('volunteer-password').value;
            
            if (name && email && password) {
                const newVolunteer = {
                    id: appData.volunteers.length + 1,
                    name: name,
                    email: email,
                    phone: phone,
                    password: password
                };
                
                appData.volunteers.push(newVolunteer);
                alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
                showLogin('volunteer');
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
            }
        }

        function loginVolunteer() {
            const email = document.getElementById('volunteer-login-email').value;
            const password = document.getElementById('volunteer-login-password').value;
            
            const volunteer = appData.volunteers.find(v => v.email === email && v.password === password);
            
            if (volunteer) {
                appData.currentUser = volunteer;
                showVolunteerDashboard();
            } else {
                alert("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
            }
        }

        function showVolunteerDashboard() {
            document.getElementById('main-page').classList.add('hidden');
            document.getElementById('volunteer-dashboard').classList.remove('hidden');
            document.getElementById('volunteer-welcome').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${appData.currentUser.name}`;
            loadVolunteerData();
            loadVolunteerNotifications();
            updateVolunteerBadges();
        }

        function loadVolunteerData() {
            loadAllReports();
            loadMyVolunteerReports();
            loadCasesForVolunteer();
        }

        function loadAllReports() {
            const allReportsList = document.getElementById('all-reports-list');
            if (!allReportsList) return;
            
            allReportsList.innerHTML = '';
            
            // Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„ØªÙŠ Ù„Ù… ÙŠØªÙ… Ø­Ø°ÙÙ‡Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø´Ø±Ø·Ø©
            const visibleReports = appData.reports.filter(report => !report.hiddenFromVolunteers);
            
            if (visibleReports.length === 0) {
                allReportsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ù„Ø§ØºØ§Øª</p>';
                return;
            }
            
            visibleReports.forEach(report => {
                const reportItem = document.createElement('div');
                reportItem.className = `report-item status-${getStatusClass(report.status)}`;
                reportItem.innerHTML = `
                    <h3>${report.missingName}</h3>
                    <p><strong>Ø§Ù„Ø¹Ù…Ø±:</strong> ${report.missingAge}</p>
                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${report.missingType}</p>
                    <p><strong>Ø¢Ø®Ø± Ù…ÙƒØ§Ù†:</strong> ${report.lastLocation}</p>
                    <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${report.status}</p>
                    <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${report.date}</p>
                    ${report.photo ? `
                        <div class="photo-preview-container">
                            <img src="${report.photo}" class="case-image" alt="ØµÙˆØ±Ø© ${report.missingName}">
                        </div>
                    ` : ''}
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="selectCaseForVolunteer(${report.id})">Ø§Ø®ØªÙŠØ§Ø± Ù‡Ø°Ù‡ Ø§Ù„Ø­Ø§Ù„Ø©</button>
                    </div>
                `;
                allReportsList.appendChild(reportItem);
            });
        }

        function selectCaseForVolunteer(reportId) {
            document.getElementById('volunteer-case').value = reportId;
            showCaseDetails(reportId);
            showVolunteerSection('select-case');
        }

        function loadCasesForVolunteer() {
            const volunteerCaseSelect = document.getElementById('volunteer-case');
            if (volunteerCaseSelect) {
                volunteerCaseSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø­Ø§Ù„Ø© ÙÙ‚Ø¯Ø§Ù†</option>';
                
                // Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„ØªÙŠ Ù„Ù… ÙŠØªÙ… Ø­Ø°ÙÙ‡Ø§ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø´Ø±Ø·Ø©
                const visibleReports = appData.reports.filter(report => !report.hiddenFromVolunteers);
                
                visibleReports.forEach(report => {
                    const option = document.createElement('option');
                    option.value = report.id;
                    option.textContent = `${report.missingName} - ${report.date} - ${report.status}`;
                    volunteerCaseSelect.appendChild(option);
                });
                
                volunteerCaseSelect.onchange = function() {
                    const caseId = this.value;
                    if (caseId) {
                        showCaseDetails(caseId);
                    } else {
                        document.getElementById('case-details').classList.add('hidden');
                    }
                };
            }
        }

        function showCaseDetails(caseId) {
            const report = appData.reports.find(r => r.id == caseId);
            if (report) {
                const caseInfo = document.getElementById('case-info');
                caseInfo.innerHTML = `
                    <div class="report-item">
                        <h3>${report.missingName}</h3>
                        <p><strong>Ø§Ù„Ø¹Ù…Ø±:</strong> ${report.missingAge}</p>
                        <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${report.missingType}</p>
                        <p><strong>Ø¢Ø®Ø± Ù…ÙƒØ§Ù„Ù…Ø©:</strong> ${report.lastCall}</p>
                        <p><strong>Ø¢Ø®Ø± Ù…ÙƒØ§Ù†:</strong> ${report.lastLocation}</p>
                        <p><strong>Ø§Ù„Ø·ÙˆÙ„:</strong> ${report.missingHeight}</p>
                        <p><strong>Ø§Ù„ÙˆØµÙ:</strong> ${report.missingDescription}</p>
                        <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${report.status}</p>
                        ${report.photo ? `
                            <div class="photo-preview-container">
                                <h4>ğŸ–¼ï¸ ØµÙˆØ±Ø© Ø§Ù„Ù…ÙÙ‚ÙˆØ¯:</h4>
                                <img src="${report.photo}" class="case-image" alt="ØµÙˆØ±Ø© ${report.missingName}">
                            </div>
                        ` : ''}
                    </div>
                `;
                
                // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
                document.getElementById('volunteer-email').value = appData.currentUser.email;
                document.getElementById('volunteer-phone-1').value = appData.currentUser.phone || '';
                
                document.getElementById('case-details').classList.remove('hidden');
                document.getElementById('volunteer-info').value = '';
            }
        }

        function submitVolunteerReport() {
            const caseId = document.getElementById('volunteer-case').value;
            const info = document.getElementById('volunteer-info').value;
            const volunteerPhone1 = document.getElementById('volunteer-phone-1').value;
            const volunteerPhone2 = document.getElementById('volunteer-phone-2').value;
            const volunteerEmail = document.getElementById('volunteer-email').value;
            
            if (caseId && info) {
                const report = appData.reports.find(r => r.id == caseId);
                if (report) {
                    const newVolunteerReport = {
                        id: appData.volunteerReports.length + 1,
                        reportId: parseInt(caseId),
                        volunteerId: appData.currentUser.id,
                        volunteerName: appData.currentUser.name,
                        volunteerEmail: volunteerEmail || appData.currentUser.email,
                        volunteerPhone1: volunteerPhone1,
                        volunteerPhone2: volunteerPhone2,
                        content: info,
                        date: new Date().toLocaleString('ar-EG'),
                        read: false
                    };
                    
                    appData.volunteerReports.push(newVolunteerReport);
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ø´Ø±Ø·Ø©
                    sendPoliceNotification(`ØªÙ‚Ø±ÙŠØ± Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…ØªØ·ÙˆØ¹ ${appData.currentUser.name} Ø¹Ù† Ø§Ù„Ø­Ø§Ù„Ø©: ${report.missingName}`);
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…ØªØ·ÙˆØ¹
                    sendVolunteerNotification(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø±ÙŠØ±Ùƒ Ø¨Ù†Ø¬Ø§Ø­ Ø¹Ù† Ø§Ù„Ø­Ø§Ù„Ø©: ${report.missingName}`);
                    
                    alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­! ØªÙ… Ø¥Ø®Ø·Ø§Ø± Ø§Ù„Ø´Ø±Ø·Ø©");
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„
                    document.getElementById('volunteer-info').value = '';
                    document.getElementById('volunteer-phone-1').value = '';
                    document.getElementById('volunteer-phone-2').value = '';
                    document.getElementById('volunteer-email').value = appData.currentUser.email;
                    document.getElementById('case-details').classList.add('hidden');
                    document.getElementById('volunteer-case').value = '';
                    
                    loadMyVolunteerReports();
                    updateVolunteerBadges();
                }
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø­Ø§Ù„Ø© ÙˆØ¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©");
            }
    }
       // ==================== Ø¥ØµÙ„Ø§Ø­: Ø¹Ø±Ø¶ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªØ·ÙˆØ¹ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ====================
        function loadMyVolunteerReports() {
            const myReportsList = document.getElementById('my-volunteer-reports-list');
            if (!myReportsList) return;
            
            myReportsList.innerHTML = '';
            
            const myReports = appData.volunteerReports.filter(report => 
                report.volunteerId === appData.currentUser.id
            );
            
            if (myReports.length === 0) {
                myReportsList.innerHTML = '<p>Ù„Ù… ØªÙ‚Ù… Ø¨Ø±ÙØ¹ Ø£ÙŠ ØªÙ‚Ø§Ø±ÙŠØ± Ø¨Ø¹Ø¯</p>';
            } else {
                myReports.forEach(vReport => {
                    const report = appData.reports.find(r => r.id === vReport.reportId);
                    if (report) {
                        const reportItem = document.createElement('div');
                        reportItem.className = 'report-item';
                        reportItem.innerHTML = `
                            <h3>${report.missingName}</h3>
                            <p><strong>Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ:</strong> ${vReport.content}</p>
                            <div class="contact-info">
                                <h4>ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ØªÙŠ Ù‚Ø¯Ù…ØªÙ‡Ø§:</h4>
                                <p><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> ${vReport.volunteerEmail}</p>
                                <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 1:</strong> ${vReport.volunteerPhone1 || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</p>
                                ${vReport.volunteerPhone2 ? `<p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 2:</strong> ${vReport.volunteerPhone2}</p>` : ''}
                            </div>
                            <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:</strong> ${vReport.date}</p>
                            <p><strong>Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ù„Ø§Øº:</strong> ${report.status}</p>
                            <div class="action-buttons">
                                <button class="btn btn-primary" onclick="editVolunteerReport(${vReport.id})">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
                                <button class="btn btn-danger" onclick="deleteVolunteerReport(${vReport.id})">Ø­Ø°Ù Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
                            </div>
                            <div id="edit-volunteer-form-${vReport.id}" class="edit-form"></div>
                        `;
                        myReportsList.appendChild(reportItem);
                    }
                });
            }
        }

        function editVolunteerReport(reportId) {
            const vReport = appData.volunteerReports.find(r => r.id === reportId);
            if (vReport) {
                const editForm = document.getElementById(`edit-volunteer-form-${reportId}`);
                editForm.innerHTML = `
                    <h4>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</h4>
                    <div class="form-group">
                        <label for="edit-volunteer-info-${reportId}">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</label>
                        <textarea id="edit-volunteer-info-${reportId}" rows="5">${vReport.content}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-volunteer-email-${reportId}">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                        <input type="email" id="edit-volunteer-email-${reportId}" value="${vReport.volunteerEmail}">
                    </div>
                    <div class="form-group">
                        <label for="edit-volunteer-phone1-${reportId}">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 1</label>
                        <input type="tel" id="edit-volunteer-phone1-${reportId}" value="${vReport.volunteerPhone1 || ''}">
                    </div>
                    <div class="form-group">
                        <label for="edit-volunteer-phone2-${reportId}">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 2</label>
                        <input type="tel" id="edit-volunteer-phone2-${reportId}" value="${vReport.volunteerPhone2 || ''}">
                    </div>
                    <button class="btn btn-success" onclick="saveVolunteerReport(${reportId})">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
                    <button class="btn btn-danger" onclick="cancelVolunteerEdit(${reportId})">Ø¥Ù„ØºØ§Ø¡</button>
                `;
                editForm.style.display = 'block';
            }
        }

        function saveVolunteerReport(reportId) {
            const vReport = appData.volunteerReports.find(r => r.id === reportId);
            if (vReport) {
                vReport.content = document.getElementById(`edit-volunteer-info-${reportId}`).value;
                vReport.volunteerEmail = document.getElementById(`edit-volunteer-email-${reportId}`).value;
                vReport.volunteerPhone1 = document.getElementById(`edit-volunteer-phone1-${reportId}`).value;
                vReport.volunteerPhone2 = document.getElementById(`edit-volunteer-phone2-${reportId}`).value;

                document.getElementById(`edit-volunteer-form-${reportId}`).style.display = 'none';
                loadMyVolunteerReports();
                showCustomNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        function cancelVolunteerEdit(reportId) {
            document.getElementById(`edit-volunteer-form-${reportId}`).style.display = 'none';
        }

        function deleteVolunteerReport(reportId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ±ØŸ')) {
                appData.volunteerReports = appData.volunteerReports.filter(r => r.id !== reportId);
                loadMyVolunteerReports();
                updateVolunteerBadges();
                showCustomNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø´Ø±Ø·Ø© ====================
        function sendPoliceNotification(message) {
            const notification = {
                id: appData.policeNotifications.length + 1,
                message: message,
                type: 'info',
                date: new Date().toLocaleString('ar-EG'),
                read: false
            };
            
            appData.policeNotifications.push(notification);
            updatePoliceBadges();
        }

        function loadPoliceNotifications() {
            const notificationsList = document.getElementById('police-notifications-list');
            if (!notificationsList) return;
            
            notificationsList.innerHTML = '';
            
            if (appData.policeNotifications.length === 0) {
                notificationsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</p>';
                return;
            }
            
            appData.policeNotifications.forEach(notification => {
                const notificationItem = document.createElement('div');
                notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                notificationItem.innerHTML = `
                    <p><strong>${notification.message}</strong></p>
                    <p><small>${notification.date}</small></p>
                    ${!notification.read ? `<button class="mark-read" onclick="markPoliceNotificationAsRead(${notification.id})">ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</button>` : ''}
                `;
                notificationsList.appendChild(notificationItem);
            });
        }

        function markPoliceNotificationAsRead(notificationId) {
            const notification = appData.policeNotifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                loadPoliceNotifications();
                updatePoliceBadges();
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ====================
        function sendUserNotification(message, userEmail = null) {
            const targetEmail = userEmail || appData.currentUser.email;
            
            const notification = {
                id: appData.userNotifications.length + 1,
                userId: targetEmail,
                message: message,
                type: 'info',
                date: new Date().toLocaleString('ar-EG'),
                read: false
            };
            
            appData.userNotifications.push(notification);
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ø­Ø§Ù„ÙŠØ§Ù‹ØŒ Ù‚Ù… Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
            if (appData.currentUser && appData.currentUser.email === targetEmail) {
                loadUserNotifications();
                updateUserBadges();
            }
        }

        function loadUserNotifications() {
            const notificationsList = document.getElementById('user-notifications-list');
            if (!notificationsList) return;
            
            notificationsList.innerHTML = '';
            
            const userNotifications = appData.userNotifications.filter(n => n.userId === appData.currentUser.email);
            
            if (userNotifications.length === 0) {
                notificationsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</p>';
                return;
            }
            
            userNotifications.forEach(notification => {
                const notificationItem = document.createElement('div');
                notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                notificationItem.innerHTML = `
                    <p><strong>${notification.message}</strong></p>
                    <p><small>${notification.date}</small></p>
                    ${!notification.read ? `<button class="mark-read" onclick="markUserNotificationAsRead(${notification.id})">ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</button>` : ''}
                `;
                notificationsList.appendChild(notificationItem);
            });
        }

        function markUserNotificationAsRead(notificationId) {
            const notification = appData.userNotifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                loadUserNotifications();
                updateUserBadges();
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† ====================
        function sendVolunteerNotification(message) {
            const notification = {
                id: appData.volunteerNotifications.length + 1,
                message: message,
                type: 'info',
                date: new Date().toLocaleString('ar-EG'),
                read: false
            };
            
            appData.volunteerNotifications.push(notification);
            updateVolunteerBadges();
        }

        function loadVolunteerNotifications() {
            const notificationsList = document.getElementById('volunteer-notifications-list');
            if (!notificationsList) return;
            
            notificationsList.innerHTML = '';
            
            if (appData.volunteerNotifications.length === 0) {
                notificationsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</p>';
                return;
            }
            
            appData.volunteerNotifications.forEach(notification => {
                const notificationItem = document.createElement('div');
                notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                notificationItem.innerHTML = `
                    <p><strong>${notification.message}</strong></p>
                    <p><small>${notification.date}</small></p>
                    ${!notification.read ? `<button class="mark-read" onclick="markVolunteerNotificationAsRead(${notification.id})">ØªÙ…Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</button>` : ''}
                `;
                notificationsList.appendChild(notificationItem);
            });
        }

        function markVolunteerNotificationAsRead(notificationId) {
            const notification = appData.volunteerNotifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                loadVolunteerNotifications();
                updateVolunteerBadges();
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† Ù…Ø¹ Ø¥Ø¶Ø§ÙØ© Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙˆØ§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ====================
        function loadVolunteerReports() {
            const volunteerReportsList = document.getElementById('volunteer-reports-list');
            if (!volunteerReportsList) return;
            
            volunteerReportsList.innerHTML = '';
            
            if (appData.volunteerReports.length === 0) {
                volunteerReportsList.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ ØªÙ‚Ø§Ø±ÙŠØ± Ù…Ù† Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†</p>';
                return;
            }
            
            appData.volunteerReports.forEach(vReport => {
                const report = appData.reports.find(r => r.id === vReport.reportId);
                if (report) {
                    const reportItem = document.createElement('div');
                    reportItem.className = 'report-item';
                    reportItem.innerHTML = `
                        <h3>ØªÙ‚Ø±ÙŠØ± Ù…Ù† Ø§Ù„Ù…ØªØ·ÙˆØ¹: ${vReport.volunteerName}</h3>
                        <p><strong>Ø¹Ù† Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${report.missingName}</p>
                        <p><strong>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ¹:</strong> ${vReport.content}</p>
                        
                        <div class="contact-info">
                            <h4>ğŸ“ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…ØªØ·ÙˆØ¹:</h4>
                            <p><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> ${vReport.volunteerEmail}</p>
                            <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 1:</strong> ${vReport.volunteerPhone1 || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</p>
                            <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 2:</strong> ${vReport.volunteerPhone2 || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}</p>
                        </div>
                        
                        <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:</strong> ${vReport.date}</p>
                        <div class="action-buttons">
                            <button class="btn btn-success" onclick="contactVolunteer('${vReport.volunteerEmail}', '${vReport.volunteerPhone1}', '${vReport.volunteerPhone2}', '${vReport.volunteerName}')">ğŸ“ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…ØªØ·ÙˆØ¹</button>
                            <button class="btn btn-danger" onclick="deleteVolunteerReportFromPolice(${vReport.id})">Ø­Ø°Ù Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
                        </div>
                    `;
                    volunteerReportsList.appendChild(reportItem);
                }
            });
        }

        function contactVolunteer(email, phone1, phone2, name) {
            let contactInfo = `Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…ØªØ·ÙˆØ¹ ${name}:\n`;
            contactInfo += `ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ${email}\n`;
            contactInfo += `ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 1: ${phone1 || 'ØºÙŠØ± Ù…ØªÙˆÙØ±'}\n`;
            if (phone2) {
                contactInfo += `ğŸ“ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ 2: ${phone2}\n`;
            }
            
            showCustomNotification(contactInfo, 'info');
        }

        function deleteVolunteerReportFromPolice(reportId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ±ØŸ')) {
                appData.volunteerReports = appData.volunteerReports.filter(r => r.id !== reportId);
                loadVolunteerReports();
                updatePoliceBadges();
                showCustomNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø±Ø§Øª ====================
        function updateUserBadges() {
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const userNotificationsBadge = document.getElementById('user-notifications-badge');
            const unreadUserNotifications = appData.userNotifications.filter(n => 
                n.userId === appData.currentUser.email && !n.read
            ).length;
            
            if (userNotificationsBadge) {
                if (unreadUserNotifications > 0) {
                    userNotificationsBadge.textContent = unreadUserNotifications;
                    userNotificationsBadge.classList.remove('hidden');
                } else {
                    userNotificationsBadge.classList.add('hidden');
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª Ø¨Ù„Ø§ØºØ§ØªÙŠ
            const myReportsBadge = document.getElementById('my-reports-badge');
            const myReportsCount = appData.reports.filter(r => 
                r.userId === appData.currentUser.email
            ).length;
            
            if (myReportsBadge && myReportsCount > 0) {
                myReportsBadge.textContent = myReportsCount;
                myReportsBadge.classList.remove('hidden');
            } else if (myReportsBadge) {
                myReportsBadge.classList.add('hidden');
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø©
            const policeReportsBadge = document.getElementById('police-reports-badge');
            const userReportsIds = appData.reports
                .filter(report => report.userId === appData.currentUser.email)
                .map(report => report.id);
            const userPoliceReportsCount = appData.policeReports.filter(pReport => 
                userReportsIds.includes(pReport.reportId)
            ).length;
            
            if (policeReportsBadge && userPoliceReportsCount > 0) {
                policeReportsBadge.textContent = userPoliceReportsCount;
                policeReportsBadge.classList.remove('hidden');
            } else if (policeReportsBadge) {
                policeReportsBadge.classList.add('hidden');
            }
        }

        function updatePoliceBadges() {
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ø´Ø±Ø·Ø©
            const policeNotificationsBadge = document.getElementById('police-notifications-badge');
            const unreadPoliceNotifications = appData.policeNotifications.filter(n => !n.read).length;
            
            if (policeNotificationsBadge) {
                if (unreadPoliceNotifications > 0) {
                    policeNotificationsBadge.textContent = unreadPoliceNotifications;
                    policeNotificationsBadge.classList.remove('hidden');
                } else {
                    policeNotificationsBadge.classList.add('hidden');
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø¨Ù„Ø§ØºØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            const newReportsBadge = document.getElementById('new-reports-badge');
            const newReportsCount = appData.reports.filter(r => r.status === 'Ø¬Ø¯ÙŠØ¯').length;
            
            if (newReportsBadge && newReportsCount > 0) {
                newReportsBadge.textContent = newReportsCount;
                newReportsBadge.classList.remove('hidden');
            } else if (newReportsBadge) {
                newReportsBadge.classList.add('hidden');
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†
            const volunteerReportsBadge = document.getElementById('volunteer-reports-badge');
            const volunteerReportsCount = appData.volunteerReports.length;
            
            if (volunteerReportsBadge && volunteerReportsCount > 0) {
                volunteerReportsBadge.textContent = volunteerReportsCount;
                volunteerReportsBadge.classList.remove('hidden');
            } else if (volunteerReportsBadge) {
                volunteerReportsBadge.classList.add('hidden');
            }
        }

        function updateVolunteerBadges() {
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†
            const volunteerNotificationsBadge = document.getElementById('volunteer-notifications-badge');
            const unreadVolunteerNotifications = appData.volunteerNotifications.filter(n => !n.read).length;
            
            if (volunteerNotificationsBadge) {
                if (unreadVolunteerNotifications > 0) {
                    volunteerNotificationsBadge.textContent = unreadVolunteerNotifications;
                    volunteerNotificationsBadge.classList.remove('hidden');
                } else {
                    volunteerNotificationsBadge.classList.add('hidden');
                }
            }
            
            // ØªØ­Ø¯ÙŠØ« Ø´Ø§Ø±Ø§Øª ØªÙ‚Ø§Ø±ÙŠØ±ÙŠ
            const myVolunteerReportsBadge = document.getElementById('my-volunteer-reports-badge');
            const myVolunteerReportsCount = appData.volunteerReports.filter(r => 
                r.volunteerId === appData.currentUser.id
            ).length;
            
            if (myVolunteerReportsBadge && myVolunteerReportsCount > 0) {
                myVolunteerReportsBadge.textContent = myVolunteerReportsCount;
                myVolunteerReportsBadge.classList.remove('hidden');
            } else if (myVolunteerReportsBadge) {
                myVolunteerReportsBadge.classList.add('hidden');
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø§Ù„ØªÙ†Ù‚Ù„ ====================
        function showPlatform(platform) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ù…Ø­ØªÙˆÙŠØ§Øª Ø§Ù„Ù…Ù†ØµØ§Øª
            document.querySelectorAll('.platform-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø­Ø¯Ø¯
            document.getElementById(`${platform}-content`).classList.add('active');
        }

        function showRegister(platform) {
            hideAllForms();
            document.getElementById(`${platform}-register`).classList.remove('hidden');
        }

        function showLogin(platform) {
            hideAllForms();
            document.getElementById(`${platform}-login`).classList.remove('hidden');
        }

        function hideAllForms() {
            document.querySelectorAll('.form-container').forEach(form => {
                form.classList.add('hidden');
            });
        }

        function showMainPage() {
            document.getElementById('main-page').classList.remove('hidden');
            document.getElementById('user-dashboard').classList.add('hidden');
            document.getElementById('police-dashboard').classList.add('hidden');
            document.getElementById('volunteer-dashboard').classList.add('hidden');
            appData.currentUser = null;
        }

        function showUserSection(section) {
            document.getElementById('add-report').classList.add('hidden');
            document.getElementById('police-reports').classList.add('hidden');
            document.getElementById('my-reports').classList.add('hidden');
            document.getElementById(section).classList.remove('hidden');
            
            if (section === 'police-reports') {
                loadPoliceReportsForUser();
            }
        }

        function showPoliceSection(section) {
            document.getElementById('new-reports').classList.add('hidden');
            document.getElementById('in-progress-reports').classList.add('hidden');
            document.getElementById('resolved-reports').classList.add('hidden');
            document.getElementById('volunteer-reports').classList.add('hidden');
            document.getElementById('upload-reports').classList.add('hidden');
            document.getElementById(section).classList.remove('hidden');
        }

        function showVolunteerSection(section) {
            document.getElementById('all-reports').classList.add('hidden');
            document.getElementById('select-case').classList.add('hidden');
            document.getElementById('my-reports').classList.add('hidden');
            document.getElementById(section).classList.remove('hidden');
            
            if (section === 'select-case') {
                loadCasesForVolunteer();
            } else if (section === 'my-reports') {
                loadMyVolunteerReports();
            }
        }

        // ==================== Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† ====================
        function loadUserReports() {
            const myReportsList = document.getElementById('my-reports-list');
            if (!myReportsList) return;
            
            myReportsList.innerHTML = '';
            
            const userReports = appData.reports.filter(report => report.userId === appData.currentUser.email);
            
            if (userReports.length === 0) {
                myReportsList.innerHTML = '<p>Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ø¨Ù„Ø§ØºØ§Øª Ø¨Ø¹Ø¯</p>';
                return;
            }
            
            userReports.forEach(report => {
                const reportItem = document.createElement('div');
                reportItem.className = `report-item status-${getStatusClass(report.status)}`;
                
                reportItem.innerHTML = `
                    <h3>${report.missingName}</h3>
                    <p><strong>Ø§Ù„Ø¹Ù…Ø±:</strong> ${report.missingAge}</p>
                    <p><strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${report.missingType}</p>
                    <p><strong>Ø¢Ø®Ø± Ù…ÙƒØ§Ù†:</strong> ${report.lastLocation}</p>
                    <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${report.status}</p>
                    <p><strong>Ø§Ù„ØªØ§Ø±ÙŠØ®:</strong> ${report.date}</p>
                    ${report.photo ? `
                        <div class="photo-preview-container">
                            <img src="${report.photo}" class="case-image" alt="ØµÙˆØ±Ø© ${report.missingName}">
                        </div>
                    ` : ''}
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="editUserReport(${report.id})">ØªØ¹Ø¯ÙŠÙ„</button>
                        <button class="btn btn-danger" onclick="deleteUserReport(${report.id})">Ø­Ø°Ù</button>
                    </div>
                    <div id="edit-form-${report.id}" class="edit-form"></div>
                `;
                
                myReportsList.appendChild(reportItem);
            });
        }

        function editUserReport(reportId) {
            const report = appData.reports.find(r => r.id === reportId);
            if (report) {
                const editForm = document.getElementById(`edit-form-${reportId}`);
                editForm.innerHTML = `
                    <h4>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨Ù„Ø§Øº</h4>
                    <div class="form-group">
                        <label for="edit-missing-name-${reportId}">Ø§Ø³Ù… Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                        <input type="text" id="edit-missing-name-${reportId}" value="${report.missingName}">
                    </div>
                    <div class="form-group">
                        <label for="edit-missing-age-${reportId}">Ø¹Ù…Ø± Ø§Ù„Ù…ÙÙ‚ÙˆØ¯</label>
                        <input type="text" id="edit-missing-age-${reportId}" value="${report.missingAge}">
                    </div>
                    <div class="form-group">
                        <label for="edit-last-location-${reportId}">Ø¢Ø®Ø± Ù…ÙƒØ§Ù†</label>
                        <input type="text" id="edit-last-location-${reportId}" value="${report.lastLocation}">
                    </div>
                    <button class="btn btn-success" onclick="saveUserReport(${reportId})">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
                    <button class="btn btn-danger" onclick="cancelEdit(${reportId})">Ø¥Ù„ØºØ§Ø¡</button>
                `;
                editForm.style.display = 'block';
            }
        }

        function saveUserReport(reportId) {
            const report = appData.reports.find(r => r.id === reportId);
            if (report) {
                report.missingName = document.getElementById(`edit-missing-name-${reportId}`).value;
                report.missingAge = document.getElementById(`edit-missing-age-${reportId}`).value;
                report.lastLocation = document.getElementById(`edit-last-location-${reportId}`).value; 
            document.getElementById(`edit-form-${reportId}`).style.display = 'none';
                loadUserReports();
                showCustomNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        function cancelEdit(reportId) {
            document.getElementById(`edit-form-${reportId}`).style.display = 'none';
        }

        function deleteUserReport(reportId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¨Ù„Ø§ØºØŸ')) {
                appData.reports = appData.reports.filter(r => r.id !== reportId);
                loadUserReports();
                updateUserBadges();
                showCustomNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ø¨Ù„Ø§Øº Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // ==================== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© ====================
        document.addEventListener('DOMContentLoaded', function() {
            initializeSampleData();
            
            // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø©
            const photoInput = document.getElementById('missing-photo');
            if (photoInput) {
                photoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const preview = document.getElementById('photo-preview');
                            preview.src = e.target.result;
                            preview.classList.remove('hidden');
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        });

        // ==================== Ø¯Ø§Ù„Ø© Ø¥Ø±Ø³Ø§Ù„ ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø´Ø±Ø·Ø© ====================
        function sendPoliceReport() {
            const caseId = document.getElementById('report-case').value;
            const content = document.getElementById('report-content').value;
            
            if (caseId && content) {
                const report = appData.reports.find(r => r.id == caseId);
                if (report) {
                    const newPoliceReport = {
                        id: appData.policeReports.length + 1,
                        reportId: parseInt(caseId),
                        content: content,
                        date: new Date().toLocaleString('ar-EG'),
                        read: false
                    };
                    
                    appData.policeReports.push(newPoliceReport);
                    
                    // Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
                    const user = appData.users.find(u => u.email === report.userId);
                    if (user) {
                        sendUserNotification(`ØªÙ… Ø¥Ø¶Ø§ÙØ© ØªÙ‚Ø±ÙŠØ± Ø¬Ø¯ÙŠØ¯ Ù…Ù† Ø§Ù„Ø´Ø±Ø·Ø© Ø¹Ù† Ø¨Ù„Ø§ØºÙƒ: ${report.missingName}`, user.email);
                    }
                    
                    alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­!");
                    document.getElementById('report-content').value = '';
                    document.getElementById('report-case').value = '';
                }
            } else {
                alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø¨Ù„Ø§Øº ÙˆØ¥Ø¯Ø®Ø§Ù„ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªÙ‚Ø±ÙŠØ±");
            }
        }
        <!-- Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¹Ø¯ÙŠÙŠÙŠÙŠÙŠÙŠÙŠÙ„ -->
    
        // Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
        class ReportApp {
            constructor() {
                this.currentUser = null;
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.checkAuth();
            }

            setupEventListeners() {
                // Ø­Ø¯Ø« Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº
                document.getElementById('reportForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.submitReport();
                });
            }

            async checkAuth() {
                // Ù‡Ù†Ø§ ÙƒÙˆØ¯ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© - Ø§ÙØªØ±Ø¶Ù†Ø§ Ø£Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                this.currentUser = { id: 'user123', email: 'user@example.com' };
                this.loadUserReports();
            }

            async submitReport() {
                const reportData = {
                    name: document.getElementById('name').value,
                    age: parseInt(document.getElementById('age').value),
                    phone1: document.getElementById('phone1').value,
                    phone2: document.getElementById('phone2').value,
                    lastLocation: document.getElementById('lastLocation').value,
                    description: document.getElementById('description').value,
                    gender: "Ø°ÙƒØ±", // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© select Ù„Ù„Ø¬Ù†Ø³
                    height: 170, // ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© input Ù„Ù„Ø·ÙˆÙ„
                    userId: this.currentUser.id
                };

                try {
                    const reportId = await DatabaseService.report.createReport(reportData);
                    
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙˆØ³ÙŠØ·
                    await DatabaseService.reportsRelation.createReportRelation({
                        reportId: reportId,
                        userId: this.currentUser.id,
                        content: `Ø¨Ù„Ø§Øº Ø¬Ø¯ÙŠØ¯ Ø¹Ù† Ù…ÙÙ‚ÙˆØ¯: ${reportData.name}`
                    });

                    alert('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº Ø¨Ù†Ø¬Ø§Ø­!');
                    document.getElementById('reportForm').reset();
                    this.loadUserReports();
                } catch (error) {
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ù„Ø§Øº: ' + error.message);
                }
            }

            async loadUserReports() {
                try {
                    const reports = await DatabaseService.report.getUserReports(this.currentUser.id);
                    this.displayReports(reports, 'reportsContainer');
                } catch (error) {
                    console.error('Error loading reports:', error);
                }
            }

            displayReports(reports, containerId) {
                const container = document.getElementById(containerId);
                container.innerHTML = '';

                if (reports.length === 0) {
                    container.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨Ù„Ø§ØºØ§Øª</p>';
                    return;
                }

                reports.forEach(report => {
                    const reportElement = document.createElement('div');
                    reportElement.className = 'report-item';
                    reportElement.style.border = '1px solid #ddd';
                    reportElement.style.padding = '15px';
                    reportElement.style.margin = '10px 0';
                    reportElement.style.borderRadius = '5px';

                    reportElement.innerHTML = `
                        <h3>${report.name}</h3>
                        <p><strong>Ø§Ù„Ø¹Ù…Ø±:</strong> ${report.Age}</p>
                        <p><strong>Ø¢Ø®Ø± Ù…ÙƒØ§Ù†:</strong> ${report.last_location}</p>
                        <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${report.status}</p>
                        <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</strong> ${new Date(report.createdAt?.toDate()).toLocaleString('ar-SA')}</p>
                        <button class="btn" onclick="app.updateReportStatus('${report.id}', 'ØªÙ… Ø§Ù„Ø­Ù„')">ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„ÙŠÙ‡</button>
                    `;

                    container.appendChild(reportElement);
                });
            }

            async updateReportStatus(reportId, newStatus) {
                try {
                    await DatabaseService.report.updateReportStatus(reportId, newStatus);
                    alert('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ø¨Ù„Ø§Øº');
                    this.loadUserReports();
                } catch (error) {
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø­Ø§Ù„Ø©: ' + error.message);
                }
            }
        }

        // Ø¯ÙˆØ§Ù„ Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠÙ†
        async function loadAllReports() {
            try {
                const reports = await DatabaseService.report.getAllReports();
                const app = new ReportApp();
                app.displayReports(reports, 'adminReportsContainer');
            } catch (error) {
                console.error('Error loading all reports:', error);
            }
        }

        async function loadVolunteers() {
            try {
                const volunteers = await DatabaseService.volunteer.getActiveVolunteers();
                console.log('Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙˆÙ† Ø§Ù„Ù†Ø´Ø·ÙˆÙ†:', volunteers);
                return volunteers;
            } catch (error) {
                console.error('Error loading volunteers:', error);
            }
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        const app = new ReportApp();

        // Ø¬Ø¹Ù„ Ø§Ù„ÙƒØ§Ø¦Ù† app Ù…ØªØ§Ø­Ù‹Ø§ globally Ù„Ù„Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø±
        window.app = app;
    </script>
</body>
</html>
