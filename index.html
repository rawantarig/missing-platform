<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÖŸÜÿµÿ© ÿ•ŸÜŸÇÿßÿ∞ ÿßŸÑŸÖŸÅŸÇŸàÿØŸäŸÜ</title>
    
    <!-- ŸÖŸÉÿ™ÿ®ÿßÿ™ Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script type="text/javascript">
        (function(){
            emailjs.init("ypOXF_3620Ebgyvia");
        })();
    </script>
    <style>
        /* ŸÜŸÅÿ≥ ÿßŸÑÿ£ŸÜŸÖÿßÿ∑ ÿßŸÑÿ≥ÿßÿ®ŸÇÿ© */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: white;
            color: black;
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .hidden {
            display: none !important;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }
        
        .main-title {
            text-align: center;
            font-size: 2.5rem;
            margin: 30px 0;
            font-weight: bold;
        }
        
        .platforms-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-top: 50px;
        }
        
        .platform-box {
            background: white;
            border: 2px solid #2E7D32;
            border-radius: 10px;
            width: 300px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            cursor: pointer;
        }
        
        .platform-box:hover {
            transform: translateY(-5px);
        }
        
        .platform-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .sub-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .btn-primary {
            background-color: #2E7D32;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #1B5E20;
        }
        
        .btn-success {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #388E3C;
        }
        
        .btn-danger {
            background-color: #f44336;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #d32f2f;
        }
        
        .form-container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            margin: 30px auto;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .menu-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 25px 0;
        }
        
        .menu-item {
            background-color: #2E7D32;
            color: white;
            padding: 18px;
            border-radius: 8px;
            cursor: pointer;
            flex: 1;
            min-width: 180px;
            text-align: center;
            font-weight: bold;
            transition: background-color 0.3s;
            position: relative;
        }
        
        .menu-item:hover {
            background-color: #1B5E20;
        }
        
        .reports-container {
            margin-top: 25px;
        }
        
        .report-item {
            background-color: #f8f9fa;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 5px solid #2E7D32;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .status-new {
            border-left-color: #2196F3;
        }
        
        .status-in-progress {
            border-left-color: #FF9800;
        }
        
        .status-resolved {
            border-left-color: #4CAF50;
        }
        
        .notification {
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }
        
        .notification-success {
            background-color: #4CAF50;
            color: white;
        }
        
        .notification-danger {
            background-color: #f44336;
            color: white;
        }
        
        .back-btn {
            margin: 20px 0;
            background-color: #6c757d;
            color: white;
            padding: 12px 25px;
        }
        
        .back-btn:hover {
            background-color: #5a6268;
        }
        
        .user-info {
            background-color: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            border: 1px solid #2E7D32;
        }
        
        .notification-badge {
            background: #f44336;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            position: absolute;
            top: -5px;
            left: -5px;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #2E7D32;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .case-image {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
            margin: 10px 0;
            border: 2px solid #ddd;
        }
        
        .platform-content {
            display: none;
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #2E7D32;
            border-radius: 10px;
            background: white;
        }
        
        .platform-content.active {
            display: block;
        }
        
        .main-content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .platform-section {
            width: 100%;
            max-width: 1000px;
            margin: 20px 0;
        }

        .contact-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-right: 4px solid #2196F3;
        }

        .photo-preview-container {
            text-align: center;
            margin: 15px 0;
        }
        
        .notification-item {
            background: #f8f9fa;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-right: 4px solid #2E7D32;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: relative;
        }
        
        .notification-item.unread {
            background: #e8f5e8;
            border-right-color: #4CAF50;
        }
        
        .notification-item .mark-read {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #2196F3;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        
        .edit-form {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        
        .header-notification {
            position: relative;
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ© -->
    <div id="main-page" class="container">
        <h1 class="main-title">üö® ŸÖŸÜÿµÿ© ÿ•ŸÜŸÇÿßÿ∞ ÿßŸÑŸÖŸÅŸÇŸàÿØŸäŸÜ üö®</h1>
        
        <div class="main-content">
            <div class="platforms-container">
                <!-- ŸÖŸÜÿµÿ© ÿßŸÑÿ¥ÿ±ÿ∑ÿ© -->
                <div class="platform-box" onclick="showPlatform('police')">
                    <div class="platform-title">üëÆ‚Äç‚ôÄÔ∏èüëÆ‚Äç‚ôÇÔ∏è ÿßŸÑÿ¥ÿ±ÿ∑ÿ©</div>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showRegister('police')">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®</button>
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showLogin('police')">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ</button>
                    </div>
                </div>
                
                <!-- ŸÖŸÜÿµÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ -->
                <div class="platform-box" onclick="showPlatform('user')">
                    <div class="platform-title">ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ</div>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showRegister('user')">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®</button>
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showLogin('user')">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ</button>
                    </div>
                </div>
                
                <!-- ŸÖŸÜÿµÿ© ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ -->
                <div class="platform-box" onclick="showPlatform('volunteer')">
                    <div class="platform-title">üë•Ô∏è ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ</div>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showRegister('volunteer')">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®</button>
                        <button class="btn btn-primary" onclick="event.stopPropagation(); showLogin('volunteer')">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ</button>
                    </div>
                </div>
            </div>

            <!-- ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸÖŸÜÿµÿßÿ™ -->
            <div class="platform-section">
                <div id="police-content" class="platform-content">
                    <h2>üëÆ‚Äç‚ôÄÔ∏èüëÆ‚Äç‚ôÇÔ∏è ŸÖŸÜÿµÿ© ÿßŸÑÿ¥ÿ±ÿ∑ÿ©</h2>
                    <p>Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÜÿµÿ© ŸÖÿÆÿµÿµÿ© ŸÑÿ±ÿ¨ÿßŸÑ ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ŸÑÿ•ÿØÿßÿ±ÿ© ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑŸÖŸÅŸÇŸàÿØŸäŸÜ ŸàŸÖÿ™ÿßÿ®ÿπÿ™Ÿáÿß.</p>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="showRegister('police')">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¥ÿ±ÿ∑ÿ©</button>
                        <button class="btn btn-primary" onclick="showLogin('police')">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑÿ¥ÿ±ÿ∑ÿ©</button>
                    </div>
                </div>

                <div id="user-content" class="platform-content">
                    <h2>üë§ ŸÖŸÜÿµÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ</h2>
                    <p>Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÜÿµÿ© ŸÖÿÆÿµÿµÿ© ŸÑŸÑŸÖŸàÿßÿ∑ŸÜŸäŸÜ ŸÑÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿπŸÜ ÿßŸÑŸÖŸÅŸÇŸàÿØŸäŸÜ ŸàŸÖÿ™ÿßÿ®ÿπÿ© ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ©.</p>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="showRegister('user')">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ≥ÿ™ÿÆÿØŸÖ</button>
                        <button class="btn btn-primary" onclick="showLogin('user')">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ</button>
                    </div>
                </div>

                <div id="volunteer-content" class="platform-content">
                    <h2>üë•Ô∏è ŸÖŸÜÿµÿ© ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ</h2>
                    <p>Ÿáÿ∞Ÿá ÿßŸÑŸÖŸÜÿµÿ© ŸÖÿÆÿµÿµÿ© ŸÑŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÖŸÅŸÇŸàÿØŸäŸÜ Ÿàÿ™ŸÇÿØŸäŸÖ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™.</p>
                    <div class="sub-buttons">
                        <button class="btn btn-primary" onclick="showRegister('volunteer')">ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ™ÿ∑Ÿàÿπ</button>
                        <button class="btn btn-primary" onclick="showLogin('volunteer')">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ</button>
                    </div>
                </div>
            </div>

            <!-- ŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸàÿßŸÑÿØÿÆŸàŸÑ -->
            <div class="platform-section">
                <!-- ŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑÿ¥ÿ±ÿ∑ÿ© -->
                <div id="police-register" class="form-container hidden">
                    <h2>ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ÿ¥ÿ±ÿ∑ÿ©</h2>
                    <div class="form-group">
                        <label for="police-name">ÿßŸÑÿßÿ≥ŸÖ</label>
                        <input type="text" id="police-name" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ">
                    </div>
                    <div class="form-group">
                        <label for="police-number">ÿßŸÑÿ±ŸÇŸÖ</label>
                        <input type="text" id="police-number" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿ±ŸÇŸÖ">
                    </div>
                    <div class="form-group">
                        <label for="police-email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label>
                        <input type="email" id="police-email" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    </div>
                    <div class="form-group">
                        <label for="police-password">ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</label>
                        <input type="password" id="police-password" placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                    </div>
                    <button class="btn btn-primary" onclick="registerPolice()" id="police-register-btn">ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®</button>
                    <button class="btn back-btn" onclick="showMainPage()">ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</button>
                </div>

                <div id="police-login" class="form-container hidden">
                    <h2>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑÿ¥ÿ±ÿ∑ÿ©</h2>
                    <div class="form-group">
                        <label for="police-login-email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label>
                        <input type="email" id="police-login-email" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    </div>
                    <div class="form-group">
                        <label for="police-login-password">ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</label>
                        <input type="password" id="police-login-password" placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                    </div>
                    <button class="btn btn-primary" onclick="loginPolice()" id="police-login-btn">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</button>
                    <button class="btn back-btn" onclick="showMainPage()">ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</button>
                </div>

                <!-- ŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ -->
                <div id="user-register" class="form-container hidden">
                    <h2>ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ≥ÿ™ÿÆÿØŸÖ</h2>
                    <div class="form-group">
                        <label for="user-name">ÿßŸÑÿßÿ≥ŸÖ</label>
                        <input type="text" id="user-name" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ">
                    </div>
                    <div class="form-group">
                        <label for="user-email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label>
                        <input type="email" id="user-email" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    </div>
                    <div class="form-group">
                        <label for="user-phone">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</label>
                        <input type="tel" id="user-phone" placeholder="ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ (+249xxxxxxxxx )" required>
                    </div>
                    <div class="form-group">
                        <label for="user-password">ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</label>
                        <input type="password" id="user-password" placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                    </div>
                    <button class="btn btn-primary" onclick="registerUser()" id="user-register-btn">ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®</button>
                    <button class="btn back-btn" onclick="showMainPage()">ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</button>
                </div>

                <div id="user-login" class="form-container hidden">
                    <h2>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ</h2>
                    <div class="form-group">
                        <label for="user-login-email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label>
                        <input type="email" id="user-login-email" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    </div>
                    <div class="form-group">
                        <label for="user-login-password">ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</label>
                        <input type="password" id="user-login-password" placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                    </div>
                    <button class="btn btn-primary" onclick="loginUser()" id="user-login-btn">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</button>
                    <button class="btn back-btn" onclick="showMainPage()">ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</button>
                </div>

                <!-- ŸÜŸÖÿßÿ∞ÿ¨ ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ -->
                <div id="volunteer-register" class="form-container hidden">
                    <h2>ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ® ŸÖÿ™ÿ∑Ÿàÿπ</h2>
                    <div class="form-group">
                        <label for="volunteer-name">ÿßŸÑÿßÿ≥ŸÖ</label>
                        <input type="text" id="volunteer-name" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿßÿ≥ŸÖ">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label>
                        <input type="email" id="volunteer-email" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-phone">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ</label>
                        <input type="tel" id="volunteer-phone" placeholder="ÿ£ÿØÿÆŸÑ ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-password">ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</label>
                        <input type="password" id="volunteer-password" placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                    </div>
                    <button class="btn btn-primary" onclick="registerVolunteer()" id="volunteer-register-btn">ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ®</button>
                    <button class="btn back-btn" onclick="showMainPage()">ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</button>
                </div>

                <div id="volunteer-login" class="form-container hidden">
                    <h2>ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ</h2>
                    <div class="form-group">
                        <label for="volunteer-login-email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label>
                        <input type="email" id="volunteer-login-email" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-login-password">ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±</label>
                        <input type="password" id="volunteer-login-password" placeholder="ÿ£ÿØÿÆŸÑ ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±">
                    </div>
                    <button class="btn btn-primary" onclick="loginVolunteer()" id="volunteer-login-btn">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ</button>
                    <button class="btn back-btn" onclick="showMainPage()">ÿßŸÑÿπŸàÿØÿ© ŸÑŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ -->
    <div id="user-dashboard" class="container hidden">
        <h1 class="main-title">ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ</h1>
        <div class="user-info" id="user-welcome"></div>
        
        <!-- ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ -->
        <div class="contact-info">
            <h3>üìû ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ</h3>
            <p><strong>ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ:</strong> <span id="user-phone-display"></span></p>
            <p><strong>ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:</strong> <span id="user-email-display"></span></p>
        </div>
        
        <!-- ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ -->
        <div id="user-notifications">
            <h3 class="header-notification">
                üîî ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™
                <span id="user-notifications-badge" class="notification-badge hidden">0</span>
            </h3>
            <div id="user-notifications-list"></div>
        </div>
        
        <div class="menu-container">
            <div class="menu-item" onclick="showUserSection('add-report')">
                ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÑÿßÿ∫
            </div>
            <div class="menu-item" onclick="showUserSection('police-reports')">
                ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ©
                <span id="police-reports-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showUserSection('my-reports')">
                ÿ®ŸÑÿßÿ∫ÿßÿ™Ÿä
                <span id="my-reports-badge" class="notification-badge hidden">0</span>
            </div>
        </div>

        <!-- ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÑÿßÿ∫ -->
        <div id="add-report" class="form-container">
            <h2>ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÑÿßÿ∫</h2>
            <form id="add-report-form">
                <div class="form-group">
                    <label for="missing-name">ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                    <input type="text" id="missing-name" placeholder="ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÅŸÇŸàÿØ" required>
                </div>
                <div class="form-group">
                    <label for="missing-age">ÿπŸÖÿ± ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                    <input type="text" id="missing-age" placeholder="ÿ£ÿØÿÆŸÑ ÿπŸÖÿ± ÿßŸÑŸÖŸÅŸÇŸàÿØ" required>
                </div>
                <div class="form-group">
                    <label for="missing-type">ŸÜŸàÿπ ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                    <select id="missing-type" required>
                        <option value="ÿ∞ŸÉÿ±">ÿ∞ŸÉÿ±</option>
                        <option value="ÿ£ŸÜÿ´Ÿâ">ÿ£ŸÜÿ´Ÿâ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="last-call">ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÑŸÖÿ© ŸÖÿπ ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                    <input type="text" id="last-call" placeholder="ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÑŸÖÿ©" required>
                </div>
                <div class="form-group">
                    <label for="last-location">ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÜ ÿ¥ŸàŸáÿØ ŸÅŸäŸá ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                    <input type="text" id="last-location" placeholder="ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÜ" required>
                </div>
                <div class="form-group">
                    <label for="missing-height">ÿ∑ŸàŸÑ ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                    <input type="text" id="missing-height" placeholder="ÿ∑ŸàŸÑ ÿßŸÑŸÖŸÅŸÇŸàÿØ" required>
                </div>
                <div class="form-group">
                    <label for="missing-description">ŸàÿµŸÅ ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                    <textarea id="missing-description" rows="3" placeholder="ŸàÿµŸÅ ÿßŸÑŸÖŸÅŸÇŸàÿØ" required></textarea>
                </div>
                
                <!-- ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ -->
                <div class="contact-info">
                    <h4>üìû ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ</h4>
                    <div class="form-group">
                        <label for="reporter-phone">ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅŸÉ ŸÑŸÑÿ™ŸàÿßÿµŸÑ</label>
                        <input type="tel" id="reporter-phone" placeholder="ÿ≥Ÿäÿ™ŸÖ ÿ™ÿπÿ®ÿ¶ÿ™Ÿá ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÖŸÜ ÿ®ŸäÿßŸÜÿßÿ™ŸÉ">
                    </div>
                    <div class="form-group">
                        <label for="additional-contact">ÿ±ŸÇŸÖ ÿßÿ™ÿµÿßŸÑ ÿ•ÿ∂ÿßŸÅŸä (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)</label>
                        <input type="tel" id="additional-contact" placeholder="ÿ±ŸÇŸÖ ÿ•ÿ∂ÿßŸÅŸä ŸÑŸÑÿ™ŸàÿßÿµŸÑ">
                    </div>
                    <div class="form-group">
                        <label for="user-phone-2">ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿ•ÿ∂ÿßŸÅŸä ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)</label>
                        <input type="tel" id="user-phone-2" placeholder="ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿ•ÿ∂ÿßŸÅŸä">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="missing-photo">ÿµŸàÿ±ÿ© ÿßŸÑŸÖŸÅŸÇŸàÿØ (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)</label>
                    <input type="file" id="missing-photo" accept="image/*">
                    <div class="photo-preview-container">
                        <img id="photo-preview" class="case-image hidden">
                    </div>
                </div>
                <button type="button" class="btn btn-primary" onclick="addUserReport()" id="add-report-btn">ÿ•ÿ®ŸÑÿßÿ∫</button>
            </form>
            
            <div id="report-success" class="notification notification-success hidden">
                ‚úÖ ÿ™ŸÖ ÿ±ŸÅÿπ ÿßŸÑÿ®ŸÑÿßÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠
            </div>
        </div>

        <!-- ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ© -->
        <div id="police-reports" class="reports-container hidden">
            <h2>ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ©</h2>
            <div id="police-reports-list"></div>
        </div>

        <!-- ÿ®ŸÑÿßÿ∫ÿßÿ™Ÿä -->
        <div id="my-reports" class="reports-container hidden">
            <h2>ÿ®ŸÑÿßÿ∫ÿßÿ™Ÿä</h2>
            <div id="my-reports-list"></div>
        </div>

        <button class="btn back-btn" onclick="showMainPage()">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</button>
    </div>

    <!-- ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ¥ÿ±ÿ∑ÿ© -->
    <div id="police-dashboard" class="container hidden">
        <h1 class="main-title">üëÆ‚Äç‚ôÄÔ∏èüëÆ‚Äç‚ôÇÔ∏è ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑÿ¥ÿ±ÿ∑ÿ©</h1>
        <div class="user-info" id="police-welcome"></div>
        
        <!-- ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ¥ÿ±ÿ∑ÿ© -->
        <div id="police-notifications">
            <h3 class="header-notification">
                üîî ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™
                <span id="police-notifications-badge" class="notification-badge hidden">0</span>
            </h3>
            <div id="police-notifications-list"></div>
        </div>
        
        <div class="menu-container">
            <div class="menu-item" onclick="showPoliceSection('new-reports')">
                ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©
                <span id="new-reports-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showPoliceSection('in-progress-reports')">
                ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ
                <span id="in-progress-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showPoliceSection('resolved-reports')">
                ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿ™ŸÖ ÿ≠ŸÑŸáÿß
                <span id="resolved-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showPoliceSection('volunteer-reports')">
                ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ
                <span id="volunteer-reports-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showPoliceSection('upload-reports')">
                ÿ±ŸÅÿπ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±
                <span id="upload-reports-badge" class="notification-badge hidden">0</span>
            </div>
        </div>

        <!-- ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ© -->
        <div id="new-reports" class="reports-container">
            <h2>ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©</h2>
            <div id="new-reports-list"></div>
        </div>

        <!-- ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ -->
        <div id="in-progress-reports" class="reports-container hidden">
            <h2>ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ</h2>
            <div id="in-progress-reports-list"></div>
        </div>

        <!-- ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿ™ŸÖ ÿ≠ŸÑŸáÿß -->
        <div id="resolved-reports" class="reports-container hidden">
            <h2>ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿ™ŸÖ ÿ≠ŸÑŸáÿß</h2>
            <div id="resolved-reports-list"></div>
        </div>

        <!-- ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ -->
        <div id="volunteer-reports" class="reports-container hidden">
            <h2>ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ</h2>
            <div id="volunteer-reports-list"></div>
        </div>

        <!-- ÿ±ŸÅÿπ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± -->
        <div id="upload-reports" class="form-container hidden">
            <h2>ÿ±ŸÅÿπ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±</h2>
            <div class="form-group">
                <label for="report-case">ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ŸÑÿßÿ∫</label>
                <select id="report-case">
                    <option value="">ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ŸÑÿßÿ∫</option>
                </select>
            </div>
            <div class="form-group">
                <label for="report-content">ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±</label>
                <textarea id="report-content" rows="5" placeholder="ÿ£ÿØÿÆŸÑ ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±"></textarea>
            </div>
            <button class="btn btn-success" onclick="sendPoliceReport()" id="send-report-btn">ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±</button>
        </div>

        <button class="btn back-btn" onclick="showMainPage()">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</button>
    </div>

    <!-- ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ -->
    <div id="volunteer-dashboard" class="container hidden">
        <h1 class="main-title">üë•Ô∏è ŸÑŸàÿ≠ÿ© ÿ™ÿ≠ŸÉŸÖ ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ</h1>
        <div class="user-info" id="volunteer-welcome"></div>
        
        <!-- ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ -->
        <div id="volunteer-notifications">
            <h3 class="header-notification">
                üîî ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™
                <span id="volunteer-notifications-badge" class="notification-badge hidden">0</span>
            </h3>
            <div id="volunteer-notifications-list"></div>
        </div>
        
        <div class="menu-container">
            <div class="menu-item" onclick="showVolunteerSection('all-reports')">
                ŸÉŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑŸÖÿ±ŸÅŸàÿπÿ© ŸÑŸÑÿ¥ÿ±ÿ∑ÿ©
                <span id="all-reports-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showVolunteerSection('select-case')">
                ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ≠ÿßŸÑÿ©
                <span id="select-case-badge" class="notification-badge hidden">0</span>
            </div>
            <div class="menu-item" onclick="showVolunteerSection('my-reports')">
                ÿ™ŸÇÿßÿ±Ÿäÿ±Ÿä
                <span id="my-volunteer-reports-badge" class="notification-badge hidden">0</span>
            </div>
        </div>

        <!-- ŸÉŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ -->
        <div id="all-reports" class="reports-container">
            <h2>ŸÉŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑŸÖÿ±ŸÅŸàÿπÿ© ŸÑŸÑÿ¥ÿ±ÿ∑ÿ©</h2>
            <div id="all-reports-list"></div>
        </div>

        <!-- ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ≠ÿßŸÑÿ© -->
        <div id="select-case" class="form-container hidden">
            <h2>ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑÿ≠ÿßŸÑÿ©</h2>
            <div class="form-group">
                <label for="volunteer-case">ÿßÿÆÿ™ÿ± ÿ≠ÿßŸÑÿ© ŸÅŸÇÿØÿßŸÜ</label>
                <select id="volunteer-case">
                    <option value="">ÿßÿÆÿ™ÿ± ÿ≠ÿßŸÑÿ© ŸÅŸÇÿØÿßŸÜ</option>
                </select>
            </div>
            
            <div id="case-details" class="hidden">
                <h3>ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ≠ÿßŸÑÿ©</h3>
                <div id="case-info"></div>
                
                <div class="form-group">
                    <label for="volunteer-info">ŸáŸÑ ÿ¥ÿßŸáÿØÿ™ ÿßŸÑÿ≠ÿßŸÑÿ© ÿ£Ÿà ŸÑÿØŸäŸÉ ÿ£Ÿä ŸÖÿπŸÑŸàŸÖÿ© ÿ™ÿ≥ÿßÿπÿØ ŸÅŸä ÿßŸÑÿ®ÿ≠ÿ´ÿü</label>
                    <textarea id="volunteer-info" rows="5" placeholder="ÿ£ÿØÿÆŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑÿØŸäŸÉ"></textarea>
                </div>
                
                <div class="contact-info">
                    <h4>üìû ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑÿÆÿßÿµÿ© ÿ®ŸÉ</h4>
                    <div class="form-group">
                        <label for="volunteer-email">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label>
                        <input type="email" id="volunteer-email" placeholder="ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-phone-1">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 1</label>
                        <input type="tel" id="volunteer-phone-1" placeholder="ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ ÿßŸÑÿ£ŸàŸÑ">
                    </div>
                    <div class="form-group">
                        <label for="volunteer-phone-2">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 2 (ÿßÿÆÿ™Ÿäÿßÿ±Ÿä)</label>
                        <input type="tel" id="volunteer-phone-2" placeholder="ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿ•ÿ∂ÿßŸÅŸä">
                    </div>
                </div>
                
                <button class="btn btn-success" onclick="submitVolunteerReport()" id="volunteer-report-btn">ÿ±ŸÅÿπ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ± ŸÑŸÑÿ¥ÿ±ÿ∑ÿ©</button>
            </div>
        </div>

        <!-- ÿ™ŸÇÿßÿ±Ÿäÿ±Ÿä -->
        <div id="my-reports" class="reports-container hidden">
            <h2>ÿ™ŸÇÿßÿ±Ÿäÿ±Ÿä ÿßŸÑŸÖŸÇÿØŸÖÿ©</h2>
            <div id="my-volunteer-reports-list"></div>
        </div>

        <button class="btn back-btn" onclick="showMainPage()">ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨</button>
    </div>
<script src="firebase-db.js"></script>
    <!-- ÿ™ŸÉŸàŸäŸÜ Firebase -->

    
</script>
    <script>
        // ÿ®ŸäÿßŸÜÿßÿ™ ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
        const appData = {
            police: [],
            users: [],
            volunteers: [],
            reports: [],
            policeReports: [],
            volunteerReports: [],
            userNotifications: [],
            policeNotifications: [],
            volunteerNotifications: [],
            currentUser: null,
            currentReportId: null,
            editingReportId: null
        };
        // ==================== ÿØŸàÿßŸÑ EmailJS ====================
        function sendLoginNotification(toEmail, userName, report) {
            console.log('üìß ŸÖÿ≠ÿßŸàŸÑÿ© ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ŸäŸÖŸäŸÑ ÿ•ŸÑŸâ:', toEmail);
            
            emailjs.send("service_sbkepx6", "template_m7905go", {
                to_email: toEmail,
                to_name: userName,
                missing_name: report.missingName,
                missing_age: report.missingAge,
                missing_type: report.missingType,
                last_call: report.lastCall,
                last_location: report.lastLocation,
                missing_height: report.missingHeight,
                missing_description: report.missingDescription,
                reporter_phone: report.reporterPhone,
                reporter_name: report.reporterName,
                additional_contact: report.additionalContact || 'ŸÑÿß ŸäŸàÿ¨ÿØ'
            })
            .then(function(response) {
                console.log('‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ŸäŸÖŸäŸÑ ÿ®ŸÜÿ¨ÿßÿ≠', response.status, response.text);
                showCustomNotification('‚úÖ ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ± ÿ®ŸÜÿ¨ÿßÿ≠ ÿ•ŸÑŸâ ' + toEmail, 'success');
            }, function(error) {
                console.log('‚ùå ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ŸäŸÖŸäŸÑ', error);
                showCustomNotification('‚ùå ŸÅÿ¥ŸÑ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ŸäŸÖŸäŸÑÿå ÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ®ÿØŸäŸÑ', 'warning');
                sendAlternativeNotification(toEmail, report);
            });
        }

        function sendAlternativeNotification(email, report) {
            console.log('üîÑ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ®ÿØŸäŸÑ ŸÑŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™');
            const backupNotification = {
                id: Date.now(),
                to: email,
                report: report,
                timestamp: new Date().toLocaleString('ar-EG'),
                type: 'backup'
            };
            
            let backups = JSON.parse(localStorage.getItem('emailBackups')) || [];
            backups.push(backupNotification);
            localStorage.setItem('emailBackups', JSON.stringify(backups));
            
            showCustomNotification('üíæ ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿ¥ÿπÿßÿ± ŸÅŸä ÿßŸÑŸÜÿ∏ÿßŸÖ ÿßŸÑÿ®ÿØŸäŸÑ', 'info');
        }

        function showCustomNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 10000;
                max-width: 400px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease-out;
            `;
            
            if (type === 'success') {
                notification.style.backgroundColor = '#4CAF50';
            } else if (type === 'warning') {
                notification.style.backgroundColor = '#FF9800';
            } else if (type === 'error') {
                notification.style.backgroundColor = '#f44336';
            } else {
                notification.style.backgroundColor = '#2196F3';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // ==================== ÿØŸàÿßŸÑ ÿßŸÑÿ™ÿ≥ÿ¨ŸäŸÑ ŸàÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ====================
        function initializeSampleData() {
            // ÿ¥ÿ±ÿ∑ÿ©
            appData.police.push({
                id: 1,
                name: "ÿ¥ÿ±ÿ∑ÿ© ÿßŸÑÿ±Ÿäÿßÿ∂",
                number: "0501234567",
                email: "police@example.com",
                password: "police123"
            });

            // ŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ
            appData.users.push({
                id: 1,
                name: "ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",
                email: "user@example.com",
                phone: "0551112222",
                password: "user123"
            });

            // ŸÖÿ™ÿ∑ŸàÿπŸäŸÜ
            appData.volunteers.push({
                id: 1,
                name: "ŸÖÿ≠ŸÖÿØ ÿπŸÑŸä",
                email: "volunteer@example.com",
                phone: "0563334444",
                password: "volunteer123"
            });

            // ÿ®ŸÑÿßÿ∫ÿßÿ™ ŸÖÿπ ÿµŸàÿ± ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©
            appData.reports.push({
                id: 1,
                userId: "user@example.com",
                reporterName: "ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",
                reporterPhone: "0551112222",
                additionalContact: "",
                userPhone2: "",
                missingName: "ÿ≥ÿßÿ±ÿ© ÿ£ÿ≠ŸÖÿØ",
                missingAge: "15 ÿ≥ŸÜÿ©",
                missingType: "ÿ£ŸÜÿ´Ÿâ",
                lastCall: "ŸäŸàŸÖ ÿßŸÑÿÆŸÖŸäÿ≥ 3 ŸÖÿ≥ÿßÿ°Ÿã",
                lastLocation: "ŸÖÿ±ŸÉÿ≤ ÿßŸÑŸÖÿØŸäŸÜÿ© ÿßŸÑÿ™ÿ¨ÿßÿ±Ÿä",
                missingHeight: "160 ÿ≥ŸÖ",
                missingDescription: "ÿ™ÿ±ÿ™ÿØŸä ŸÅÿ≥ÿ™ÿßŸÜ ÿ£ÿ≤ÿ±ŸÇ Ÿàÿ™ÿ≠ŸÖŸÑ ÿ≠ŸÇŸäÿ®ÿ© ÿ≥ŸàÿØÿßÿ°",
                status: "ÿ¨ÿØŸäÿØ",
                date: new Date().toLocaleDateString('ar-EG'),
                photo: "https://via.placeholder.com/200x200/4CAF50/FFFFFF?text=ÿµŸàÿ±ÿ©+ÿßŸÑŸÖŸÅŸÇŸàÿØ"
            });

            appData.reports.push({
                id: 2,
                userId: "user@example.com",
                reporterName: "ÿ£ÿ≠ŸÖÿØ ŸÖÿ≠ŸÖÿØ",
                reporterPhone: "0551112222",
                additionalContact: "0567890123",
                userPhone2: "",
                missingName: "ÿÆÿßŸÑÿØ ÿπÿ®ÿØÿßŸÑŸÑŸá",
                missingAge: "25 ÿ≥ŸÜÿ©",
                missingType: "ÿ∞ŸÉÿ±",
                lastCall: "ÿ£ŸÖÿ≥ ÿßŸÑÿ≥ÿßÿπÿ© 5 ŸÖÿ≥ÿßÿ°Ÿã",
                lastLocation: "ÿ≠ÿØŸäŸÇÿ© ÿßŸÑÿ≠ŸäŸàÿßŸÜÿßÿ™",
                missingHeight: "175 ÿ≥ŸÖ",
                missingDescription: "Ÿäÿ±ÿ™ÿØŸä ŸÇŸÖŸäÿµ ÿ£ÿ®Ÿäÿ∂ Ÿàÿ≥ÿ±ŸàÿßŸÑ ÿ¨ŸäŸÜÿ≤ ÿ£ÿ≤ÿ±ŸÇ",
                status: "ŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ",
                date: new Date().toLocaleDateString('ar-EG'),
                photo: "https://via.placeholder.com/200x200/2196F3/FFFFFF?text=ÿµŸàÿ±ÿ©+ÿßŸÑŸÖŸÅŸÇŸàÿØ"
            });

            // ÿ™ŸÇÿßÿ±Ÿäÿ± ÿ¥ÿ±ÿ∑ÿ© ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©
            appData.policeReports.push({
                id: 1,
                reportId: 1,
                content: "ÿ™ŸÖ ÿßŸÑÿ®ÿØÿ° ŸÅŸä ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑŸÖŸÅŸÇŸàÿØÿ© ŸÅŸä ÿßŸÑŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑŸÖÿ≠ÿØÿØÿ©",
                date: new Date().toLocaleString('ar-EG'),
                read: false
            });

            // ÿ™ŸÇÿßÿ±Ÿäÿ± ŸÖÿ™ÿ∑ŸàÿπŸäŸÜ ÿ™ÿ¨ÿ±Ÿäÿ®Ÿäÿ©
            appData.volunteerReports.push({
                id: 1,
                reportId: 1,
                volunteerId: 1,
                volunteerName: "ŸÖÿ≠ŸÖÿØ ÿπŸÑŸä",
                volunteerEmail: "volunteer@example.com",
                volunteerPhone1: "0563334444",
                volunteerPhone2: "0575556666",
                content: "ÿ±ÿ£Ÿäÿ™ ÿ¥ÿÆÿµÿßŸã Ÿäÿ¥ÿ®Ÿá ÿßŸÑŸÖŸÅŸÇŸàÿØÿ© ŸÅŸä ŸÖŸÜÿ∑ŸÇÿ© ÿßŸÑÿ≥ŸàŸÇ ÿßŸÑŸÖÿ±ŸÉÿ≤Ÿä",
                date: new Date().toLocaleString('ar-EG'),
                read: false
            });
        }
function registerUser() {
            const name = document.getElementById('user-name').value;
            const email = document.getElementById('user-email').value;
            const phone = document.getElementById('user-phone').value;
            const password = document.getElementById('user-password').value;
            
            if (name && email && phone && password) {
                const newUser = {
                    id: appData.users.length + 1,
                    name: name,
                    email: email,
                    phone: phone,
                    password: password
                };
                
                appData.users.push(newUser);
                alert("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠!");
                showLogin('user');
            } else {
                alert("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ");
            }
}
        function loginUser() {
            const email = document.getElementById('user-login-email').value;
            const password = document.getElementById('user-login-password').value;
            
            const user = appData.users.find(u => u.email === email && u.password === password);
            
            if (user) {
                appData.currentUser = user;
                showUserDashboard();
            } else {
                alert("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©");
            }
        }

        function showUserDashboard() {
            document.getElementById('main-page').classList.add('hidden');
            document.getElementById('user-dashboard').classList.remove('hidden');
            document.getElementById('user-welcome').textContent = `ŸÖÿ±ÿ≠ÿ®ÿßŸã ${appData.currentUser.name}`;
            
            document.getElementById('user-phone-display').textContent = appData.currentUser.phone;
            document.getElementById('user-email-display').textContent = appData.currentUser.email;
            document.getElementById('reporter-phone').value = appData.currentUser.phone;
            
            loadUserNotifications();
            loadUserReports();
            loadPoliceReportsForUser(); // ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿ≠ŸÖŸäŸÑ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
            updateUserBadges();
        }

        // ==================== ÿ•ÿµŸÑÿßÿ≠: ÿπÿ±ÿ∂ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ====================
        function loadPoliceReportsForUser() {
            const policeReportsList = document.getElementById('police-reports-list');
            if (!policeReportsList) return;
            
            policeReportsList.innerHTML = '';
            
            // ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ÿßŸÑŸÖÿ±ÿ™ÿ®ÿ∑ÿ© ÿ®ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
            const userReportsIds = appData.reports
                .filter(report => report.userId === appData.currentUser.email)
                .map(report => report.id);
            
            const userPoliceReports = appData.policeReports.filter(pReport => 
                userReportsIds.includes(pReport.reportId)
            );
            
            if (userPoliceReports.length === 0) {
                policeReportsList.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ŸÇÿßÿ±Ÿäÿ± ŸÖŸÜ ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ÿ®ÿπÿØ</p>';
                return;
            }
            
            userPoliceReports.forEach(pReport => {
                const report = appData.reports.find(r => r.id === pReport.reportId);
                if (report) {
                    const reportItem = document.createElement('div');
                    reportItem.className = 'report-item';
                    reportItem.innerHTML = `
                        <h3>ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ÿπŸÜ: ${report.missingName}</h3>
                        <p><strong>ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±:</strong> ${pReport.content}</p>
                        <p><strong>ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±:</strong> ${pReport.date}</p>
                        <p><strong>ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®ŸÑÿßÿ∫:</strong> ${report.status}</p>
                    `;
                    policeReportsList.appendChild(reportItem);
                }
            });
        }

        // ==================== ÿØŸàÿßŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ ŸÖÿπ ÿßŸÑÿµŸàÿ± ====================
         function addUserReport() {
            const missingName = document.getElementById('missing-name').value;
            const missingAge = document.getElementById('missing-age').value;
            const missingType = document.getElementById('missing-type').value;
            const lastCall = document.getElementById('last-call').value;
            const lastLocation = document.getElementById('last-location').value;
            const missingHeight = document.getElementById('missing-height').value;
            const missingDescription = document.getElementById('missing-description').value;
            const reporterPhone = document.getElementById('reporter-phone').value;
            const additionalContact = document.getElementById('additional-contact').value;
            const userPhone2 = document.getElementById('user-phone-2').value;
            const photoInput = document.getElementById('missing-photo');
            
            if (missingName && missingAge && lastLocation && reporterPhone) {
                let photoData = null;
                
                if (photoInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        photoData = e.target.result;
                        completeReportSubmission(photoData);
                    };
                    reader.readAsDataURL(photoInput.files[0]);
                } else {
                    completeReportSubmission(null);
                }
                
                function completeReportSubmission(photo) {
                    const newReport = {
                        id: appData.reports.length + 1,
                        userId: appData.currentUser.email,
                        reporterName: appData.currentUser.name,
                        reporterPhone: reporterPhone,
                        additionalContact: additionalContact,
                        userPhone2: userPhone2,
                        missingName: missingName,
                        missingAge: missingAge,
                        missingType: missingType,
                        lastCall: lastCall,
                        lastLocation: lastLocation,
                        missingHeight: missingHeight,
                        missingDescription: missingDescription,
                        status: "ÿ¨ÿØŸäÿØ",
                        date: new Date().toLocaleDateString('ar-EG'),
                        photo: photo
                    };
                    
                    appData.reports.push(newReport);
                    
                    // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑÿ¥ÿ±ÿ∑ÿ©
                    sendPoliceNotification(`ÿ®ŸÑÿßÿ∫ ÿ¨ÿØŸäÿØ: ${missingName} - ${lastLocation}`);
                    
                    // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
                    sendUserNotification(`ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÑÿßÿ∫ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ÿπŸÜ ${missingName}`);
                    
                    document.getElementById('report-success').classList.remove('hidden');
                    document.getElementById('add-report-form').reset();
                    document.getElementById('photo-preview').classList.add('hidden');
                    document.getElementById('reporter-phone').value = appData.currentUser.phone;
                    
                    setTimeout(() => {
                        document.getElementById('report-success').classList.add('hidden');
                    }, 5000);
                    
                    loadUserReports();
                    updateUserBadges();
                    
                    alert("‚úÖ ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠ Ÿàÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑÿ¥ÿ±ÿ∑ÿ©");
                }
            } else {
                alert("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿßŸÑÿ≠ŸÇŸàŸÑ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ© ÿÆÿßÿµÿ© ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ");
            }
        }

        // ==================== ÿØŸàÿßŸÑ ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ŸÖÿπ ÿ•ÿµŸÑÿßÿ≠ ÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ± ====================
        function registerPolice() {
            const name = document.getElementById('police-name').value;
            const number = document.getElementById('police-number').value;
            const email = document.getElementById('police-email').value;
            const password = document.getElementById('police-password').value;
            
            if (name && number && email && password) {
                const newPolice = {
                    id: appData.police.length + 1,
                    name: name,
                    number: number,
                    email: email,
                    password: password
                };
                
                appData.police.push(newPolice);
                alert("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠!");
                showLogin('police');
            } else {
                alert("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ");
            }
        }

        function loginPolice() {
            const email = document.getElementById('police-login-email').value;
            const password = document.getElementById('police-login-password').value;
            
            const police = appData.police.find(p => p.email === email && p.password === password);
            
            if (police) {
                appData.currentUser = police;
                showPoliceDashboard();
            } else {
                alert("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©");
            }
        }

        function showPoliceDashboard() {
            document.getElementById('main-page').classList.add('hidden');
            document.getElementById('police-dashboard').classList.remove('hidden');
            document.getElementById('police-welcome').textContent = `ŸÖÿ±ÿ≠ÿ®ÿßŸã ${appData.currentUser.name}`;
            loadPoliceData();
            loadPoliceNotifications();
            updatePoliceBadges();
        }

        function loadPoliceData() {
            loadReportsByStatus('new-reports-list', 'ÿ¨ÿØŸäÿØ');
            loadReportsByStatus('in-progress-reports-list', 'ŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ');
            loadReportsByStatus('resolved-reports-list', 'ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ');
            loadVolunteerReports();
            
            // ÿ™ÿ≠ÿØŸäÿ´ ŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ŸÅŸä ŸÜŸÖŸàÿ∞ÿ¨ ÿ±ŸÅÿπ ÿßŸÑÿ™ŸÇÿßÿ±Ÿäÿ±
            const reportCaseSelect = document.getElementById('report-case');
            if (reportCaseSelect) {
                reportCaseSelect.innerHTML = '<option value="">ÿßÿÆÿ™ÿ± ÿßŸÑÿ®ŸÑÿßÿ∫</option>';
                appData.reports.forEach(report => {
                    const option = document.createElement('option');
                    option.value = report.id;
                    option.textContent = `${report.missingName} - ${report.date} - ${report.status}`;
                    reportCaseSelect.appendChild(option);
                });
            }
        }

        function loadReportsByStatus(containerId, status) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = '';
            
            const filteredReports = appData.reports.filter(report => report.status === status);
            
            if (filteredReports.length === 0) {
                container.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸÑÿßÿ∫ÿßÿ™</p>';
                return;
            }
            
            filteredReports.forEach(report => {
                const reportItem = createPoliceReportItem(report);
                container.appendChild(reportItem);
            });
        }

        function createPoliceReportItem(report) {
            const reportItem = document.createElement('div');
            reportItem.className = `report-item status-${getStatusClass(report.status)}`;
            
            let actions = '';
            if (report.status === 'ÿ¨ÿØŸäÿØ') {
                actions = `<button class="btn btn-primary" onclick="updateReportStatus(${report.id}, 'ŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ')">ÿ®ÿØÿ° ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ©</button>`;
            } else if (report.status === 'ŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ') {
                actions = `<button class="btn btn-success" onclick="updateReportStatus(${report.id}, 'ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ')">ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ</button>`;
            }
            
            // ÿ•ÿ∂ÿßŸÅÿ© ÿ≤ÿ± ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ®ŸÑÿ∫
            actions += `<button class="btn btn-success" onclick="contactReporter('${report.reporterPhone}', '${report.reporterName}')">üìû ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ®ŸÑÿ∫</button>`;
            
            reportItem.innerHTML = `
                <h3>${report.missingName}</h3>
                <p><strong>ÿßŸÑÿπŸÖÿ±:</strong> ${report.missingAge}</p>
                <p><strong>ÿßŸÑŸÜŸàÿπ:</strong> ${report.missingType}</p>
                <p><strong>ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÑŸÖÿ©:</strong> ${report.lastCall}</p>
                <p><strong>ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÜ:</strong> ${report.lastLocation}</p>
                <p><strong>ÿßŸÑÿ∑ŸàŸÑ:</strong> ${report.missingHeight}</p>
                <p><strong>ÿßŸÑŸàÿµŸÅ:</strong> ${report.missingDescription}</p>
                <div class="contact-info">
                    <h4>üìû ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿ¨Ÿáÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ:</h4>
                    <p><strong>ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ®ŸÑÿ∫:</strong> ${report.reporterName}</p>
                    <p><strong>ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ:</strong> ${report.reporterPhone}</p>
                    ${report.additionalContact ? `<p><strong>ÿ±ŸÇŸÖ ÿ•ÿ∂ÿßŸÅŸä:</strong> ${report.additionalContact}</p>` : ''}
                    ${report.userPhone2 ? `<p><strong>ÿ±ŸÇŸÖ Ÿáÿßÿ™ŸÅ ÿ•ÿ∂ÿßŸÅŸä ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:</strong> ${report.userPhone2}</p>` : ''}
                </div>
                ${report.photo ? `
                    <div class="photo-preview-container">
                        <h4>üñºÔ∏è ÿµŸàÿ±ÿ© ÿßŸÑŸÖŸÅŸÇŸàÿØ:</h4>
                        <img src="${report.photo}" class="case-image" alt="ÿµŸàÿ±ÿ© ${report.missingName}">
                    </div>
                ` : ''}
                <p><strong>ÿßŸÑÿ≠ÿßŸÑÿ©:</strong> ${report.status}</p>
                <p><strong>ÿßŸÑÿ™ÿßÿ±ŸäÿÆ:</strong> ${report.date}</p>
                <div class="action-buttons">${actions}</div>
            `;
            
            return reportItem;
        }

        function getStatusClass(status) {
            switch(status) {
                case 'ÿ¨ÿØŸäÿØ': return 'new';
                case 'ŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ': return 'in-progress';
                case 'ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ': return 'resolved';
                default: return 'new';
            }
        }

        function updateReportStatus(reportId, newStatus) {
            const report = appData.reports.find(r => r.id === reportId);
            if (report) {
                const oldStatus = report.status;
                report.status = newStatus;
                
                // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ÿπŸÜÿØ ÿ™ÿ∫ŸäŸäÿ± ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®ŸÑÿßÿ∫
                if (oldStatus !== newStatus) {
                    const user = appData.users.find(u => u.email === report.userId);
                    if (user) {
                        sendUserNotification(`ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿ®ŸÑÿßÿ∫ŸÉ ÿπŸÜ ${report.missingName} ŸÖŸÜ ${oldStatus} ÿ•ŸÑŸâ ${newStatus}`, user.email);
                    }
                }
                
                loadPoliceData();
                updatePoliceBadges();
                alert(`ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®ŸÑÿßÿ∫ ÿ•ŸÑŸâ: ${newStatus}`);
            }
        }

        function contactReporter(phone, name) {
            showCustomNotification(`üìû ÿ¨ÿßÿ±Ÿä ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÄ ${name} ÿπŸÑŸâ ÿßŸÑÿ±ŸÇŸÖ: ${phone}`, 'info');
        }

        // ==================== ÿØŸàÿßŸÑ ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ ŸÖÿπ ÿ•ÿµŸÑÿßÿ≠ ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ====================
        function registerVolunteer() {
            const name = document.getElementById('volunteer-name').value;
            const email = document.getElementById('volunteer-email').value;
            const phone = document.getElementById('volunteer-phone').value;
            const password = document.getElementById('volunteer-password').value;
            
            if (name && email && password) {
                const newVolunteer = {
                    id: appData.volunteers.length + 1,
                    name: name,
                    email: email,
                    phone: phone,
                    password: password
                };
                
                appData.volunteers.push(newVolunteer);
                alert("ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠!");
                showLogin('volunteer');
            } else {
                alert("Ÿäÿ±ÿ¨Ÿâ ŸÖŸÑÿ° ÿ¨ŸÖŸäÿπ ÿßŸÑÿ≠ŸÇŸàŸÑ");
            }
        }

        function loginVolunteer() {
            const email = document.getElementById('volunteer-login-email').value;
            const password = document.getElementById('volunteer-login-password').value;
            
            const volunteer = appData.volunteers.find(v => v.email === email && v.password === password);
            
            if (volunteer) {
                appData.currentUser = volunteer;
                showVolunteerDashboard();
            } else {
                alert("ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©");
            }
        }

        function showVolunteerDashboard() {
            document.getElementById('main-page').classList.add('hidden');
            document.getElementById('volunteer-dashboard').classList.remove('hidden');
            document.getElementById('volunteer-welcome').textContent = `ŸÖÿ±ÿ≠ÿ®ÿßŸã ${appData.currentUser.name}`;
            loadVolunteerData();
            loadVolunteerNotifications();
            updateVolunteerBadges();
        }

        function loadVolunteerData() {
            loadAllReports();
            loadMyVolunteerReports();
            loadCasesForVolunteer();
        }

        function loadAllReports() {
            const allReportsList = document.getElementById('all-reports-list');
            if (!allReportsList) return;
            
            allReportsList.innerHTML = '';
            
            // ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑŸÖ Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅŸáÿß ŸÖŸÜ ŸÇÿ®ŸÑ ÿßŸÑÿ¥ÿ±ÿ∑ÿ©
            const visibleReports = appData.reports.filter(report => !report.hiddenFromVolunteers);
            
            if (visibleReports.length === 0) {
                allReportsList.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸÑÿßÿ∫ÿßÿ™</p>';
                return;
            }
            
            visibleReports.forEach(report => {
                const reportItem = document.createElement('div');
                reportItem.className = `report-item status-${getStatusClass(report.status)}`;
                reportItem.innerHTML = `
                    <h3>${report.missingName}</h3>
                    <p><strong>ÿßŸÑÿπŸÖÿ±:</strong> ${report.missingAge}</p>
                    <p><strong>ÿßŸÑŸÜŸàÿπ:</strong> ${report.missingType}</p>
                    <p><strong>ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÜ:</strong> ${report.lastLocation}</p>
                    <p><strong>ÿßŸÑÿ≠ÿßŸÑÿ©:</strong> ${report.status}</p>
                    <p><strong>ÿßŸÑÿ™ÿßÿ±ŸäÿÆ:</strong> ${report.date}</p>
                    ${report.photo ? `
                        <div class="photo-preview-container">
                            <img src="${report.photo}" class="case-image" alt="ÿµŸàÿ±ÿ© ${report.missingName}">
                        </div>
                    ` : ''}
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="selectCaseForVolunteer(${report.id})">ÿßÿÆÿ™Ÿäÿßÿ± Ÿáÿ∞Ÿá ÿßŸÑÿ≠ÿßŸÑÿ©</button>
                    </div>
                `;
                allReportsList.appendChild(reportItem);
            });
        }

        function selectCaseForVolunteer(reportId) {
            document.getElementById('volunteer-case').value = reportId;
            showCaseDetails(reportId);
            showVolunteerSection('select-case');
        }

        function loadCasesForVolunteer() {
            const volunteerCaseSelect = document.getElementById('volunteer-case');
            if (volunteerCaseSelect) {
                volunteerCaseSelect.innerHTML = '<option value="">ÿßÿÆÿ™ÿ± ÿ≠ÿßŸÑÿ© ŸÅŸÇÿØÿßŸÜ</option>';
                
                // ÿπÿ±ÿ∂ ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑÿ™Ÿä ŸÑŸÖ Ÿäÿ™ŸÖ ÿ≠ÿ∞ŸÅŸáÿß ŸÖŸÜ ŸÇÿ®ŸÑ ÿßŸÑÿ¥ÿ±ÿ∑ÿ©
                const visibleReports = appData.reports.filter(report => !report.hiddenFromVolunteers);
                
                visibleReports.forEach(report => {
                    const option = document.createElement('option');
                    option.value = report.id;
                    option.textContent = `${report.missingName} - ${report.date} - ${report.status}`;
                    volunteerCaseSelect.appendChild(option);
                });
                
                volunteerCaseSelect.onchange = function() {
                    const caseId = this.value;
                    if (caseId) {
                        showCaseDetails(caseId);
                    } else {
                        document.getElementById('case-details').classList.add('hidden');
                    }
                };
            }
        }

        function showCaseDetails(caseId) {
            const report = appData.reports.find(r => r.id == caseId);
            if (report) {
                const caseInfo = document.getElementById('case-info');
                caseInfo.innerHTML = `
                    <div class="report-item">
                        <h3>${report.missingName}</h3>
                        <p><strong>ÿßŸÑÿπŸÖÿ±:</strong> ${report.missingAge}</p>
                        <p><strong>ÿßŸÑŸÜŸàÿπ:</strong> ${report.missingType}</p>
                        <p><strong>ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÑŸÖÿ©:</strong> ${report.lastCall}</p>
                        <p><strong>ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÜ:</strong> ${report.lastLocation}</p>
                        <p><strong>ÿßŸÑÿ∑ŸàŸÑ:</strong> ${report.missingHeight}</p>
                        <p><strong>ÿßŸÑŸàÿµŸÅ:</strong> ${report.missingDescription}</p>
                        <p><strong>ÿßŸÑÿ≠ÿßŸÑÿ©:</strong> ${report.status}</p>
                        ${report.photo ? `
                            <div class="photo-preview-container">
                                <h4>üñºÔ∏è ÿµŸàÿ±ÿ© ÿßŸÑŸÖŸÅŸÇŸàÿØ:</h4>
                                <img src="${report.photo}" class="case-image" alt="ÿµŸàÿ±ÿ© ${report.missingName}">
                            </div>
                        ` : ''}
                    </div>
                `;
                
                // ÿ™ÿπÿ®ÿ¶ÿ© ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã
                document.getElementById('volunteer-email').value = appData.currentUser.email;
                document.getElementById('volunteer-phone-1').value = appData.currentUser.phone || '';
                
                document.getElementById('case-details').classList.remove('hidden');
                document.getElementById('volunteer-info').value = '';
            }
        }

        function submitVolunteerReport() {
            const caseId = document.getElementById('volunteer-case').value;
            const info = document.getElementById('volunteer-info').value;
            const volunteerPhone1 = document.getElementById('volunteer-phone-1').value;
            const volunteerPhone2 = document.getElementById('volunteer-phone-2').value;
            const volunteerEmail = document.getElementById('volunteer-email').value;
            
            if (caseId && info) {
                const report = appData.reports.find(r => r.id == caseId);
                if (report) {
                    const newVolunteerReport = {
                        id: appData.volunteerReports.length + 1,
                        reportId: parseInt(caseId),
                        volunteerId: appData.currentUser.id,
                        volunteerName: appData.currentUser.name,
                        volunteerEmail: volunteerEmail || appData.currentUser.email,
                        volunteerPhone1: volunteerPhone1,
                        volunteerPhone2: volunteerPhone2,
                        content: info,
                        date: new Date().toLocaleString('ar-EG'),
                        read: false
                    };
                    
                    appData.volunteerReports.push(newVolunteerReport);
                    
                    // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑÿ¥ÿ±ÿ∑ÿ©
                    sendPoliceNotification(`ÿ™ŸÇÿ±Ÿäÿ± ÿ¨ÿØŸäÿØ ŸÖŸÜ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ ${appData.currentUser.name} ÿπŸÜ ÿßŸÑÿ≠ÿßŸÑÿ©: ${report.missingName}`);
                    
                    // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÖÿ™ÿ∑Ÿàÿπ
                    sendVolunteerNotification(`ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÇÿ±Ÿäÿ±ŸÉ ÿ®ŸÜÿ¨ÿßÿ≠ ÿπŸÜ ÿßŸÑÿ≠ÿßŸÑÿ©: ${report.missingName}`);
                    
                    alert("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ®ŸÜÿ¨ÿßÿ≠! ÿ™ŸÖ ÿ•ÿÆÿ∑ÿßÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ©");
                    
                    // ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑÿ≠ŸÇŸàŸÑ
                    document.getElementById('volunteer-info').value = '';
                    document.getElementById('volunteer-phone-1').value = '';
                    document.getElementById('volunteer-phone-2').value = '';
                    document.getElementById('volunteer-email').value = appData.currentUser.email;
                    document.getElementById('case-details').classList.add('hidden');
                    document.getElementById('volunteer-case').value = '';
                    
                    loadMyVolunteerReports();
                    updateVolunteerBadges();
                }
            } else {
                alert("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿ≠ÿßŸÑÿ© Ÿàÿ•ÿØÿÆÿßŸÑ ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©");
            }
    }
       // ==================== ÿ•ÿµŸÑÿßÿ≠: ÿπÿ±ÿ∂ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ ŸÖÿπ ÿ•ŸÖŸÉÿßŸÜŸäÿ© ÿßŸÑÿ™ÿπÿØŸäŸÑ ====================
        function loadMyVolunteerReports() {
            const myReportsList = document.getElementById('my-volunteer-reports-list');
            if (!myReportsList) return;
            
            myReportsList.innerHTML = '';
            
            const myReports = appData.volunteerReports.filter(report => 
                report.volunteerId === appData.currentUser.id
            );
            
            if (myReports.length === 0) {
                myReportsList.innerHTML = '<p>ŸÑŸÖ ÿ™ŸÇŸÖ ÿ®ÿ±ŸÅÿπ ÿ£Ÿä ÿ™ŸÇÿßÿ±Ÿäÿ± ÿ®ÿπÿØ</p>';
            } else {
                myReports.forEach(vReport => {
                    const report = appData.reports.find(r => r.id === vReport.reportId);
                    if (report) {
                        const reportItem = document.createElement('div');
                        reportItem.className = 'report-item';
                        reportItem.innerHTML = `
                            <h3>${report.missingName}</h3>
                            <p><strong>ŸÖÿπŸÑŸàŸÖÿßÿ™ŸÉ:</strong> ${vReport.content}</p>
                            <div class="contact-info">
                                <h4>üìû ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑÿ™Ÿä ŸÇÿØŸÖÿ™Ÿáÿß:</h4>
                                <p><strong>ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:</strong> ${vReport.volunteerEmail}</p>
                                <p><strong>ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 1:</strong> ${vReport.volunteerPhone1 || 'ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±'}</p>
                                ${vReport.volunteerPhone2 ? `<p><strong>ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 2:</strong> ${vReport.volunteerPhone2}</p>` : ''}
                            </div>
                            <p><strong>ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ:</strong> ${vReport.date}</p>
                            <p><strong>ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®ŸÑÿßÿ∫:</strong> ${report.status}</p>
                            <div class="action-buttons">
                                <button class="btn btn-primary" onclick="editVolunteerReport(${vReport.id})">ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±</button>
                                <button class="btn btn-danger" onclick="deleteVolunteerReport(${vReport.id})">ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±</button>
                            </div>
                            <div id="edit-volunteer-form-${vReport.id}" class="edit-form"></div>
                        `;
                        myReportsList.appendChild(reportItem);
                    }
                });
            }
        }

        function editVolunteerReport(reportId) {
            const vReport = appData.volunteerReports.find(r => r.id === reportId);
            if (vReport) {
                const editForm = document.getElementById(`edit-volunteer-form-${reportId}`);
                editForm.innerHTML = `
                    <h4>ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±</h4>
                    <div class="form-group">
                        <label for="edit-volunteer-info-${reportId}">ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™</label>
                        <textarea id="edit-volunteer-info-${reportId}" rows="5">${vReport.content}</textarea>
                    </div>
                    <div class="form-group">
                        <label for="edit-volunteer-email-${reportId}">ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä</label>
                        <input type="email" id="edit-volunteer-email-${reportId}" value="${vReport.volunteerEmail}">
                    </div>
                    <div class="form-group">
                        <label for="edit-volunteer-phone1-${reportId}">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 1</label>
                        <input type="tel" id="edit-volunteer-phone1-${reportId}" value="${vReport.volunteerPhone1 || ''}">
                    </div>
                    <div class="form-group">
                        <label for="edit-volunteer-phone2-${reportId}">ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 2</label>
                        <input type="tel" id="edit-volunteer-phone2-${reportId}" value="${vReport.volunteerPhone2 || ''}">
                    </div>
                    <button class="btn btn-success" onclick="saveVolunteerReport(${reportId})">ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™</button>
                    <button class="btn btn-danger" onclick="cancelVolunteerEdit(${reportId})">ÿ•ŸÑÿ∫ÿßÿ°</button>
                `;
                editForm.style.display = 'block';
            }
        }

        function saveVolunteerReport(reportId) {
            const vReport = appData.volunteerReports.find(r => r.id === reportId);
            if (vReport) {
                vReport.content = document.getElementById(`edit-volunteer-info-${reportId}`).value;
                vReport.volunteerEmail = document.getElementById(`edit-volunteer-email-${reportId}`).value;
                vReport.volunteerPhone1 = document.getElementById(`edit-volunteer-phone1-${reportId}`).value;
                vReport.volunteerPhone2 = document.getElementById(`edit-volunteer-phone2-${reportId}`).value;

                document.getElementById(`edit-volunteer-form-${reportId}`).style.display = 'none';
                loadMyVolunteerReports();
                showCustomNotification('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
            }
        }

        function cancelVolunteerEdit(reportId) {
            document.getElementById(`edit-volunteer-form-${reportId}`).style.display = 'none';
        }

        function deleteVolunteerReport(reportId) {
            if (confirm('ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±ÿü')) {
                appData.volunteerReports = appData.volunteerReports.filter(r => r.id !== reportId);
                loadMyVolunteerReports();
                updateVolunteerBadges();
                showCustomNotification('ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
            }
        }

        // ==================== ÿØŸàÿßŸÑ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ====================
        function sendPoliceNotification(message) {
            const notification = {
                id: appData.policeNotifications.length + 1,
                message: message,
                type: 'info',
                date: new Date().toLocaleString('ar-EG'),
                read: false
            };
            
            appData.policeNotifications.push(notification);
            updatePoliceBadges();
        }

        function loadPoliceNotifications() {
            const notificationsList = document.getElementById('police-notifications-list');
            if (!notificationsList) return;
            
            notificationsList.innerHTML = '';
            
            if (appData.policeNotifications.length === 0) {
                notificationsList.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™</p>';
                return;
            }
            
            appData.policeNotifications.forEach(notification => {
                const notificationItem = document.createElement('div');
                notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                notificationItem.innerHTML = `
                    <p><strong>${notification.message}</strong></p>
                    <p><small>${notification.date}</small></p>
                    ${!notification.read ? `<button class="mark-read" onclick="markPoliceNotificationAsRead(${notification.id})">ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©</button>` : ''}
                `;
                notificationsList.appendChild(notificationItem);
            });
        }

        function markPoliceNotificationAsRead(notificationId) {
            const notification = appData.policeNotifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                loadPoliceNotifications();
                updatePoliceBadges();
            }
        }

        // ==================== ÿØŸàÿßŸÑ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ====================
        function sendUserNotification(message, userEmail = null) {
            const targetEmail = userEmail || appData.currentUser.email;
            
            const notification = {
                id: appData.userNotifications.length + 1,
                userId: targetEmail,
                message: message,
                type: 'info',
                date: new Date().toLocaleString('ar-EG'),
                read: false
            };
            
            appData.userNotifications.push(notification);
            
            // ÿ•ÿ∞ÿß ŸÉÿßŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ¨ŸÑ ÿØÿÆŸàŸÑ ÿ≠ÿßŸÑŸäÿßŸãÿå ŸÇŸÖ ÿ®ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™
            if (appData.currentUser && appData.currentUser.email === targetEmail) {
                loadUserNotifications();
                updateUserBadges();
            }
        }

        function loadUserNotifications() {
            const notificationsList = document.getElementById('user-notifications-list');
            if (!notificationsList) return;
            
            notificationsList.innerHTML = '';
            
            const userNotifications = appData.userNotifications.filter(n => n.userId === appData.currentUser.email);
            
            if (userNotifications.length === 0) {
                notificationsList.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™</p>';
                return;
            }
            
            userNotifications.forEach(notification => {
                const notificationItem = document.createElement('div');
                notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                notificationItem.innerHTML = `
                    <p><strong>${notification.message}</strong></p>
                    <p><small>${notification.date}</small></p>
                    ${!notification.read ? `<button class="mark-read" onclick="markUserNotificationAsRead(${notification.id})">ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©</button>` : ''}
                `;
                notificationsList.appendChild(notificationItem);
            });
        }

        function markUserNotificationAsRead(notificationId) {
            const notification = appData.userNotifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                loadUserNotifications();
                updateUserBadges();
            }
        }

        // ==================== ÿØŸàÿßŸÑ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ ====================
        function sendVolunteerNotification(message) {
            const notification = {
                id: appData.volunteerNotifications.length + 1,
                message: message,
                type: 'info',
                date: new Date().toLocaleString('ar-EG'),
                read: false
            };
            
            appData.volunteerNotifications.push(notification);
            updateVolunteerBadges();
        }

        function loadVolunteerNotifications() {
            const notificationsList = document.getElementById('volunteer-notifications-list');
            if (!notificationsList) return;
            
            notificationsList.innerHTML = '';
            
            if (appData.volunteerNotifications.length === 0) {
                notificationsList.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™</p>';
                return;
            }
            
            appData.volunteerNotifications.forEach(notification => {
                const notificationItem = document.createElement('div');
                notificationItem.className = `notification-item ${notification.read ? '' : 'unread'}`;
                notificationItem.innerHTML = `
                    <p><strong>${notification.message}</strong></p>
                    <p><small>${notification.date}</small></p>
                    ${!notification.read ? `<button class="mark-read" onclick="markVolunteerNotificationAsRead(${notification.id})">ÿ™ŸÖÿ™ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©</button>` : ''}
                `;
                notificationsList.appendChild(notificationItem);
            });
        }

        function markVolunteerNotificationAsRead(notificationId) {
            const notification = appData.volunteerNotifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                loadVolunteerNotifications();
                updateVolunteerBadges();
            }
        }

        // ==================== ÿØŸàÿßŸÑ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ ŸÖÿπ ÿ•ÿ∂ÿßŸÅÿ© ÿ£ÿ±ŸÇÿßŸÖ ÿßŸÑŸáŸàÿßÿ™ŸÅ ŸàÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ====================
        function loadVolunteerReports() {
            const volunteerReportsList = document.getElementById('volunteer-reports-list');
            if (!volunteerReportsList) return;
            
            volunteerReportsList.innerHTML = '';
            
            if (appData.volunteerReports.length === 0) {
                volunteerReportsList.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ™ŸÇÿßÿ±Ÿäÿ± ŸÖŸÜ ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ</p>';
                return;
            }
            
            appData.volunteerReports.forEach(vReport => {
                const report = appData.reports.find(r => r.id === vReport.reportId);
                if (report) {
                    const reportItem = document.createElement('div');
                    reportItem.className = 'report-item';
                    reportItem.innerHTML = `
                        <h3>ÿ™ŸÇÿ±Ÿäÿ± ŸÖŸÜ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ: ${vReport.volunteerName}</h3>
                        <p><strong>ÿπŸÜ ÿßŸÑÿ≠ÿßŸÑÿ©:</strong> ${report.missingName}</p>
                        <p><strong>ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ:</strong> ${vReport.content}</p>
                        
                        <div class="contact-info">
                            <h4>üìû ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ:</h4>
                            <p><strong>ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:</strong> ${vReport.volunteerEmail}</p>
                            <p><strong>ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 1:</strong> ${vReport.volunteerPhone1 || 'ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±'}</p>
                            <p><strong>ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 2:</strong> ${vReport.volunteerPhone2 || 'ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±'}</p>
                        </div>
                        
                        <p><strong>ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ:</strong> ${vReport.date}</p>
                        <div class="action-buttons">
                            <button class="btn btn-success" onclick="contactVolunteer('${vReport.volunteerEmail}', '${vReport.volunteerPhone1}', '${vReport.volunteerPhone2}', '${vReport.volunteerName}')">üìû ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ</button>
                            <button class="btn btn-danger" onclick="deleteVolunteerReportFromPolice(${vReport.id})">ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±</button>
                        </div>
                    `;
                    volunteerReportsList.appendChild(reportItem);
                }
            });
        }

        function contactVolunteer(email, phone1, phone2, name) {
            let contactInfo = `ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ™ÿ∑Ÿàÿπ ${name}:\n`;
            contactInfo += `üìß ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä: ${email}\n`;
            contactInfo += `üìû ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 1: ${phone1 || 'ÿ∫Ÿäÿ± ŸÖÿ™ŸàŸÅÿ±'}\n`;
            if (phone2) {
                contactInfo += `üìû ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ 2: ${phone2}\n`;
            }
            
            showCustomNotification(contactInfo, 'info');
        }

        function deleteVolunteerReportFromPolice(reportId) {
            if (confirm('ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±ÿü')) {
                appData.volunteerReports = appData.volunteerReports.filter(r => r.id !== reportId);
                loadVolunteerReports();
                updatePoliceBadges();
                showCustomNotification('ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
            }
        }

        // ==================== ÿØŸàÿßŸÑ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ¥ÿßÿ±ÿßÿ™ ====================
        function updateUserBadges() {
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ±ÿßÿ™ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
            const userNotificationsBadge = document.getElementById('user-notifications-badge');
            const unreadUserNotifications = appData.userNotifications.filter(n => 
                n.userId === appData.currentUser.email && !n.read
            ).length;
            
            if (userNotificationsBadge) {
                if (unreadUserNotifications > 0) {
                    userNotificationsBadge.textContent = unreadUserNotifications;
                    userNotificationsBadge.classList.remove('hidden');
                } else {
                    userNotificationsBadge.classList.add('hidden');
                }
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ±ÿßÿ™ ÿ®ŸÑÿßÿ∫ÿßÿ™Ÿä
            const myReportsBadge = document.getElementById('my-reports-badge');
            const myReportsCount = appData.reports.filter(r => 
                r.userId === appData.currentUser.email
            ).length;
            
            if (myReportsBadge && myReportsCount > 0) {
                myReportsBadge.textContent = myReportsCount;
                myReportsBadge.classList.remove('hidden');
            } else if (myReportsBadge) {
                myReportsBadge.classList.add('hidden');
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ±ÿßÿ™ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ©
            const policeReportsBadge = document.getElementById('police-reports-badge');
            const userReportsIds = appData.reports
                .filter(report => report.userId === appData.currentUser.email)
                .map(report => report.id);
            const userPoliceReportsCount = appData.policeReports.filter(pReport => 
                userReportsIds.includes(pReport.reportId)
            ).length;
            
            if (policeReportsBadge && userPoliceReportsCount > 0) {
                policeReportsBadge.textContent = userPoliceReportsCount;
                policeReportsBadge.classList.remove('hidden');
            } else if (policeReportsBadge) {
                policeReportsBadge.classList.add('hidden');
            }
        }

        function updatePoliceBadges() {
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ±ÿßÿ™ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÑŸÑÿ¥ÿ±ÿ∑ÿ©
            const policeNotificationsBadge = document.getElementById('police-notifications-badge');
            const unreadPoliceNotifications = appData.policeNotifications.filter(n => !n.read).length;
            
            if (policeNotificationsBadge) {
                if (unreadPoliceNotifications > 0) {
                    policeNotificationsBadge.textContent = unreadPoliceNotifications;
                    policeNotificationsBadge.classList.remove('hidden');
                } else {
                    policeNotificationsBadge.classList.add('hidden');
                }
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ±ÿßÿ™ ÿßŸÑÿ®ŸÑÿßÿ∫ÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ©
            const newReportsBadge = document.getElementById('new-reports-badge');
            const newReportsCount = appData.reports.filter(r => r.status === 'ÿ¨ÿØŸäÿØ').length;
            
            if (newReportsBadge && newReportsCount > 0) {
                newReportsBadge.textContent = newReportsCount;
                newReportsBadge.classList.remove('hidden');
            } else if (newReportsBadge) {
                newReportsBadge.classList.add('hidden');
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ±ÿßÿ™ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ
            const volunteerReportsBadge = document.getElementById('volunteer-reports-badge');
            const volunteerReportsCount = appData.volunteerReports.length;
            
            if (volunteerReportsBadge && volunteerReportsCount > 0) {
                volunteerReportsBadge.textContent = volunteerReportsCount;
                volunteerReportsBadge.classList.remove('hidden');
            } else if (volunteerReportsBadge) {
                volunteerReportsBadge.classList.add('hidden');
            }
        }

        function updateVolunteerBadges() {
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ±ÿßÿ™ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ŸÑŸÑŸÖÿ™ÿ∑ŸàÿπŸäŸÜ
            const volunteerNotificationsBadge = document.getElementById('volunteer-notifications-badge');
            const unreadVolunteerNotifications = appData.volunteerNotifications.filter(n => !n.read).length;
            
            if (volunteerNotificationsBadge) {
                if (unreadVolunteerNotifications > 0) {
                    volunteerNotificationsBadge.textContent = unreadVolunteerNotifications;
                    volunteerNotificationsBadge.classList.remove('hidden');
                } else {
                    volunteerNotificationsBadge.classList.add('hidden');
                }
            }
            
            // ÿ™ÿ≠ÿØŸäÿ´ ÿ¥ÿßÿ±ÿßÿ™ ÿ™ŸÇÿßÿ±Ÿäÿ±Ÿä
            const myVolunteerReportsBadge = document.getElementById('my-volunteer-reports-badge');
            const myVolunteerReportsCount = appData.volunteerReports.filter(r => 
                r.volunteerId === appData.currentUser.id
            ).length;
            
            if (myVolunteerReportsBadge && myVolunteerReportsCount > 0) {
                myVolunteerReportsBadge.textContent = myVolunteerReportsCount;
                myVolunteerReportsBadge.classList.remove('hidden');
            } else if (myVolunteerReportsBadge) {
                myVolunteerReportsBadge.classList.add('hidden');
            }
        }

        // ==================== ÿØŸàÿßŸÑ ÿßŸÑÿ™ŸÜŸÇŸÑ ====================
        function showPlatform(platform) {
            // ÿ•ÿÆŸÅÿßÿ° ÿ¨ŸÖŸäÿπ ŸÖÿ≠ÿ™ŸàŸäÿßÿ™ ÿßŸÑŸÖŸÜÿµÿßÿ™
            document.querySelectorAll('.platform-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸÖÿ≠ÿØÿØ
            document.getElementById(`${platform}-content`).classList.add('active');
        }

        function showRegister(platform) {
            hideAllForms();
            document.getElementById(`${platform}-register`).classList.remove('hidden');
        }

        function showLogin(platform) {
            hideAllForms();
            document.getElementById(`${platform}-login`).classList.remove('hidden');
        }

        function hideAllForms() {
            document.querySelectorAll('.form-container').forEach(form => {
                form.classList.add('hidden');
            });
        }

        function showMainPage() {
            document.getElementById('main-page').classList.remove('hidden');
            document.getElementById('user-dashboard').classList.add('hidden');
            document.getElementById('police-dashboard').classList.add('hidden');
            document.getElementById('volunteer-dashboard').classList.add('hidden');
            appData.currentUser = null;
        }

        function showUserSection(section) {
            document.getElementById('add-report').classList.add('hidden');
            document.getElementById('police-reports').classList.add('hidden');
            document.getElementById('my-reports').classList.add('hidden');
            document.getElementById(section).classList.remove('hidden');
            
            if (section === 'police-reports') {
                loadPoliceReportsForUser();
            }
        }

        function showPoliceSection(section) {
            document.getElementById('new-reports').classList.add('hidden');
            document.getElementById('in-progress-reports').classList.add('hidden');
            document.getElementById('resolved-reports').classList.add('hidden');
            document.getElementById('volunteer-reports').classList.add('hidden');
            document.getElementById('upload-reports').classList.add('hidden');
            document.getElementById(section).classList.remove('hidden');
        }

        function showVolunteerSection(section) {
            document.getElementById('all-reports').classList.add('hidden');
            document.getElementById('select-case').classList.add('hidden');
            document.getElementById('my-reports').classList.add('hidden');
            document.getElementById(section).classList.remove('hidden');
            
            if (section === 'select-case') {
                loadCasesForVolunteer();
            } else if (section === 'my-reports') {
                loadMyVolunteerReports();
            }
        }

        // ==================== ÿØŸàÿßŸÑ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ====================
        function loadUserReports() {
            const myReportsList = document.getElementById('my-reports-list');
            if (!myReportsList) return;
            
            myReportsList.innerHTML = '';
            
            const userReports = appData.reports.filter(report => report.userId === appData.currentUser.email);
            
            if (userReports.length === 0) {
                myReportsList.innerHTML = '<p>ŸÑŸÖ ÿ™ŸÇŸÖ ÿ®ÿ•ÿ∂ÿßŸÅÿ© ÿ£Ÿä ÿ®ŸÑÿßÿ∫ÿßÿ™ ÿ®ÿπÿØ</p>';
                return;
            }
            
            userReports.forEach(report => {
                const reportItem = document.createElement('div');
                reportItem.className = `report-item status-${getStatusClass(report.status)}`;
                
                reportItem.innerHTML = `
                    <h3>${report.missingName}</h3>
                    <p><strong>ÿßŸÑÿπŸÖÿ±:</strong> ${report.missingAge}</p>
                    <p><strong>ÿßŸÑŸÜŸàÿπ:</strong> ${report.missingType}</p>
                    <p><strong>ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÜ:</strong> ${report.lastLocation}</p>
                    <p><strong>ÿßŸÑÿ≠ÿßŸÑÿ©:</strong> ${report.status}</p>
                    <p><strong>ÿßŸÑÿ™ÿßÿ±ŸäÿÆ:</strong> ${report.date}</p>
                    ${report.photo ? `
                        <div class="photo-preview-container">
                            <img src="${report.photo}" class="case-image" alt="ÿµŸàÿ±ÿ© ${report.missingName}">
                        </div>
                    ` : ''}
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="editUserReport(${report.id})">ÿ™ÿπÿØŸäŸÑ</button>
                        <button class="btn btn-danger" onclick="deleteUserReport(${report.id})">ÿ≠ÿ∞ŸÅ</button>
                    </div>
                    <div id="edit-form-${report.id}" class="edit-form"></div>
                `;
                
                myReportsList.appendChild(reportItem);
            });
        }

        function editUserReport(reportId) {
            const report = appData.reports.find(r => r.id === reportId);
            if (report) {
                const editForm = document.getElementById(`edit-form-${reportId}`);
                editForm.innerHTML = `
                    <h4>ÿ™ÿπÿØŸäŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫</h4>
                    <div class="form-group">
                        <label for="edit-missing-name-${reportId}">ÿßÿ≥ŸÖ ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                        <input type="text" id="edit-missing-name-${reportId}" value="${report.missingName}">
                    </div>
                    <div class="form-group">
                        <label for="edit-missing-age-${reportId}">ÿπŸÖÿ± ÿßŸÑŸÖŸÅŸÇŸàÿØ</label>
                        <input type="text" id="edit-missing-age-${reportId}" value="${report.missingAge}">
                    </div>
                    <div class="form-group">
                        <label for="edit-last-location-${reportId}">ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÜ</label>
                        <input type="text" id="edit-last-location-${reportId}" value="${report.lastLocation}">
                    </div>
                    <button class="btn btn-success" onclick="saveUserReport(${reportId})">ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™</button>
                    <button class="btn btn-danger" onclick="cancelEdit(${reportId})">ÿ•ŸÑÿ∫ÿßÿ°</button>
                `;
                editForm.style.display = 'block';
            }
        }

        function saveUserReport(reportId) {
            const report = appData.reports.find(r => r.id === reportId);
            if (report) {
                report.missingName = document.getElementById(`edit-missing-name-${reportId}`).value;
                report.missingAge = document.getElementById(`edit-missing-age-${reportId}`).value;
                report.lastLocation = document.getElementById(`edit-last-location-${reportId}`).value; 
            document.getElementById(`edit-form-${reportId}`).style.display = 'none';
                loadUserReports();
                showCustomNotification('ÿ™ŸÖ ÿ≠ŸÅÿ∏ ÿßŸÑÿ™ÿπÿØŸäŸÑÿßÿ™ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
            }
        }

        function cancelEdit(reportId) {
            document.getElementById(`edit-form-${reportId}`).style.display = 'none';
        }

        function deleteUserReport(reportId) {
            if (confirm('ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ≠ÿ∞ŸÅ Ÿáÿ∞ÿß ÿßŸÑÿ®ŸÑÿßÿ∫ÿü')) {
                appData.reports = appData.reports.filter(r => r.id !== reportId);
                loadUserReports();
                updateUserBadges();
                showCustomNotification('ÿ™ŸÖ ÿ≠ÿ∞ŸÅ ÿßŸÑÿ®ŸÑÿßÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠', 'success');
            }
        }

        // ==================== ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ© ====================
        document.addEventListener('DOMContentLoaded', function() {
            initializeSampleData();
            
            // ŸÖÿπÿßŸÑÿ¨ÿ© ÿπÿ±ÿ∂ ÿßŸÑÿµŸàÿ± ÿßŸÑŸÖÿ±ŸÅŸàÿπÿ©
            const photoInput = document.getElementById('missing-photo');
            if (photoInput) {
                photoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const preview = document.getElementById('photo-preview');
                            preview.src = e.target.result;
                            preview.classList.remove('hidden');
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }
        });

        // ==================== ÿØÿßŸÑÿ© ÿ•ÿ±ÿ≥ÿßŸÑ ÿ™ŸÇÿßÿ±Ÿäÿ± ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ====================
        function sendPoliceReport() {
            const caseId = document.getElementById('report-case').value;
            const content = document.getElementById('report-content').value;
            
            if (caseId && content) {
                const report = appData.reports.find(r => r.id == caseId);
                if (report) {
                    const newPoliceReport = {
                        id: appData.policeReports.length + 1,
                        reportId: parseInt(caseId),
                        content: content,
                        date: new Date().toLocaleString('ar-EG'),
                        read: false
                    };
                    
                    appData.policeReports.push(newPoliceReport);
                    
                    // ÿ•ÿ±ÿ≥ÿßŸÑ ÿ•ÿ¥ÿπÿßÿ± ŸÑŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ
                    const user = appData.users.find(u => u.email === report.userId);
                    if (user) {
                        sendUserNotification(`ÿ™ŸÖ ÿ•ÿ∂ÿßŸÅÿ© ÿ™ŸÇÿ±Ÿäÿ± ÿ¨ÿØŸäÿØ ŸÖŸÜ ÿßŸÑÿ¥ÿ±ÿ∑ÿ© ÿπŸÜ ÿ®ŸÑÿßÿ∫ŸÉ: ${report.missingName}`, user.email);
                    }
                    
                    alert("ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ®ŸÜÿ¨ÿßÿ≠!");
                    document.getElementById('report-content').value = '';
                    document.getElementById('report-case').value = '';
                }
            } else {
                alert("Ÿäÿ±ÿ¨Ÿâ ÿßÿÆÿ™Ÿäÿßÿ± ÿ®ŸÑÿßÿ∫ Ÿàÿ•ÿØÿÆÿßŸÑ ŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±");
            }
        }
        <!-- ÿßŸÑŸÉŸàÿØ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ™ÿπÿØŸäŸäŸäŸäŸäŸäŸäŸÑ -->
    
        // ÿßŸÑŸÉŸàÿØ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä ŸÑŸÑÿ™ÿ∑ÿ®ŸäŸÇ
        class ReportApp {
            constructor() {
                this.currentUser = null;
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.checkAuth();
            }

            setupEventListeners() {
                // ÿ≠ÿØÿ´ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫
                document.getElementById('reportForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.submitReport();
                });
            }

            async checkAuth() {
                // ŸáŸÜÿß ŸÉŸàÿØ ÿßŸÑŸÖÿµÿßÿØŸÇÿ© - ÿßŸÅÿ™ÿ±ÿ∂ŸÜÿß ÿ£ŸÜ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ
                this.currentUser = { id: 'user123', email: 'user@example.com' };
                this.loadUserReports();
            }

            async submitReport() {
                const reportData = {
                    name: document.getElementById('name').value,
                    age: parseInt(document.getElementById('age').value),
                    phone1: document.getElementById('phone1').value,
                    phone2: document.getElementById('phone2').value,
                    lastLocation: document.getElementById('lastLocation').value,
                    description: document.getElementById('description').value,
                    gender: "ÿ∞ŸÉÿ±", // ŸäŸÖŸÉŸÜŸÉ ÿ•ÿ∂ÿßŸÅÿ© select ŸÑŸÑÿ¨ŸÜÿ≥
                    height: 170, // ŸäŸÖŸÉŸÜŸÉ ÿ•ÿ∂ÿßŸÅÿ© input ŸÑŸÑÿ∑ŸàŸÑ
                    userId: this.currentUser.id
                };

                try {
                    const reportId = await DatabaseService.report.createReport(reportData);
                    
                    // ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿπŸÑÿßŸÇÿ© ŸÅŸä ÿßŸÑÿ¨ÿØŸàŸÑ ÿßŸÑŸàÿ≥Ÿäÿ∑
                    await DatabaseService.reportsRelation.createReportRelation({
                        reportId: reportId,
                        userId: this.currentUser.id,
                        content: `ÿ®ŸÑÿßÿ∫ ÿ¨ÿØŸäÿØ ÿπŸÜ ŸÖŸÅŸÇŸàÿØ: ${reportData.name}`
                    });

                    alert('ÿ™ŸÖ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫ ÿ®ŸÜÿ¨ÿßÿ≠!');
                    document.getElementById('reportForm').reset();
                    this.loadUserReports();
                } catch (error) {
                    alert('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ®ŸÑÿßÿ∫: ' + error.message);
                }
            }

            async loadUserReports() {
                try {
                    const reports = await DatabaseService.report.getUserReports(this.currentUser.id);
                    this.displayReports(reports, 'reportsContainer');
                } catch (error) {
                    console.error('Error loading reports:', error);
                }
            }

            displayReports(reports, containerId) {
                const container = document.getElementById(containerId);
                container.innerHTML = '';

                if (reports.length === 0) {
                    container.innerHTML = '<p>ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸÑÿßÿ∫ÿßÿ™</p>';
                    return;
                }

                reports.forEach(report => {
                    const reportElement = document.createElement('div');
                    reportElement.className = 'report-item';
                    reportElement.style.border = '1px solid #ddd';
                    reportElement.style.padding = '15px';
                    reportElement.style.margin = '10px 0';
                    reportElement.style.borderRadius = '5px';

                    reportElement.innerHTML = `
                        <h3>${report.name}</h3>
                        <p><strong>ÿßŸÑÿπŸÖÿ±:</strong> ${report.Age}</p>
                        <p><strong>ÿ¢ÿÆÿ± ŸÖŸÉÿßŸÜ:</strong> ${report.last_location}</p>
                        <p><strong>ÿßŸÑÿ≠ÿßŸÑÿ©:</strong> ${report.status}</p>
                        <p><strong>ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑÿ•ŸÜÿ¥ÿßÿ°:</strong> ${new Date(report.createdAt?.toDate()).toLocaleString('ar-SA')}</p>
                        <button class="btn" onclick="app.updateReportStatus('${report.id}', 'ÿ™ŸÖ ÿßŸÑÿ≠ŸÑ')">ÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸäŸá</button>
                    `;

                    container.appendChild(reportElement);
                });
            }

            async updateReportStatus(reportId, newStatus) {
                try {
                    await DatabaseService.report.updateReportStatus(reportId, newStatus);
                    alert('ÿ™ŸÖ ÿ™ÿ≠ÿØŸäÿ´ ÿ≠ÿßŸÑÿ© ÿßŸÑÿ®ŸÑÿßÿ∫');
                    this.loadUserReports();
                } catch (error) {
                    alert('ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£ ŸÅŸä ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿ≠ÿßŸÑÿ©: ' + error.message);
                }
            }
        }

        // ÿØŸàÿßŸÑ ÿ•ÿ∂ÿßŸÅŸäÿ© ŸÑŸÑŸÖÿ≥ÿ§ŸàŸÑŸäŸÜ
        async function loadAllReports() {
            try {
                const reports = await DatabaseService.report.getAllReports();
                const app = new ReportApp();
                app.displayReports(reports, 'adminReportsContainer');
            } catch (error) {
                console.error('Error loading all reports:', error);
            }
        }

        async function loadVolunteers() {
            try {
                const volunteers = await DatabaseService.volunteer.getActiveVolunteers();
                console.log('ÿßŸÑŸÖÿ™ÿ∑ŸàÿπŸàŸÜ ÿßŸÑŸÜÿ¥ÿ∑ŸàŸÜ:', volunteers);
                return volunteers;
            } catch (error) {
                console.error('Error loading volunteers:', error);
            }
        }

        // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
        const app = new ReportApp();

        // ÿ¨ÿπŸÑ ÿßŸÑŸÉÿßÿ¶ŸÜ app ŸÖÿ™ÿßÿ≠Ÿãÿß globally ŸÑŸÑÿßÿ≥ÿ™ÿØÿπÿßÿ° ŸÖŸÜ ÿßŸÑÿ£ÿ≤ÿ±ÿßÿ±
        window.app = app;
    </script>
</body>
</html>
